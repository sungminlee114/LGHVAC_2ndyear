[{"Input": "이번주 우리반과 앞반의 평균 온도 알려줘", "Scenario": "scenario2", "Metadata": {"idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}, "current_datetime": "2022-09-29 21:30:00"}, "Candidate": {"Thinking": "사용자는 이번주 우리반과 앞반의 평균 실내온도를 알고 싶어함. 이번주 우리반과 앞반의 실내온도 데이터를 쿼리한 후 평균값을 계산하여 반환하면 됨.", "Expectations": ["이번주 우리반과 앞반의 평균 실내온도는 {{이번주_우리반과_앞반의_실내온도_평균}}℃ 입니다."], "Script": ["v_이번주_우리반과_앞반의_실내온도_df = \"SELECT (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"roomtemp\", \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('02_I81', '01_IB7')) AND timestamp >= TIMESTAMP '2022-09-26 00:00:00' AND timestamp < TIMESTAMP '2022-10-03 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_이번주_우리반과_앞반의_실내온도_평균 = v_이번주_우리반과_앞반의_실내온도_df['roomtemp'].mean()"]}}, {"Input": "현재 설정온도랑 실내온도 차이 알려줘.", "Scenario": "scenario2", "Metadata": {"idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}, "current_datetime": "2022-09-29 21:30:00"}, "Candidate": {"Thinking": "사용자는 현재 설정온도와 실내온도 차이를 알고 싶어함. 현재 설정온도와 실내온도를 쿼리한 후 차이를 계산하여 반환하면 됨.", "Expectations": ["현재 설정온도({{현재_설정온도}}℃)와 실내온도({{현재_실내온도}}℃)의 차이는 {{현재_설정온도-현재_실내온도}}℃입니다."], "Script": ["v_현재_설정온도_df = \"SELECT \"settemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"roomtemp\", \"timestamp\" FROM \"data_t\" WHERE \"settemp\" IS NOT NULL AND \"settemp\" IS DISTINCT FROM 'NaN' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \"data_t\") ORDER BY timestamp\"", "v_현재_설정온도, v_현재_실내온도 = v_현재_설정온도_df['settemp'].values[0], v_현재_설정온도_df['roomtemp'].values[0]", "v_현재_설정온도_실내온도차이 = v_현재_설정온도 - v_현재_실내온도"]}}, {"Input": "지난달에 설정온도와 실내온도 차이가 가장 많이 났던 날은?", "Scenario": "scenario2", "Metadata": {"idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}, "current_datetime": "2022-09-29 21:30:00"}, "Candidate": {"Thinking": "사용자는 지난달 설정온도와 실내온도 차이가 가장 컸던 날짜를 알고 싶어함. 지난달 설정온도와 실내온도 데이터를 쿼리한 후 차이를 계산하면 됨.", "Expectations": ["지난달 설정온도와 실내온도 차이가 가장 컸던 날은 {{지난달_설정온도_실내온도_차이_최고_날짜}}로 {{지난달_설정온도_실내온도_차이_최고}}℃였습니다."], "Script": ["v_지난달_설정온도_실내온도_df = \"SELECT \"settemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"roomtemp\", \"timestamp\" FROM \"data_t\" WHERE timestamp >= TIMESTAMP '2022-08-01 00:00:00' AND timestamp < TIMESTAMP '2022-09-01 00:00:00' AND \"settemp\" IS NOT NULL AND \"settemp\" IS DISTINCT FROM 'NaN' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_지난달_설정온도_실내온도_df['차이'] = v_지난달_설정온도_실내온도_df['settemp'] - v_지난달_설정온도_실내온도_df['roomtemp']", "v_지난달_설정온도_실내온도_차이_최고 = v_지난달_설정온도_실내온도_df['차이'].max()", "v_지난달_설정온도_실내온도_차이_최고_df = v_지난달_설정온도_실내온도_df[v_지난달_설정온도_실내온도_df['차이'] == v_지난달_설정온도_실내온도_차이_최고]", "v_지난달_설정온도_실내온도_차이_최고_날짜 = get_time(v_지난달_설정온도_실내온도_차이_최고_df, fmt='date')"]}}, {"Input": "이번주 우리반과 옆반의 평균 실내온도 차이 알려줘", "Scenario": "scenario2", "Metadata": {"idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}, "current_datetime": "2022-09-29 21:30:00"}, "Candidate": {"Thinking": "사용자는 이번주 우리반과 옆반의 평균 실내온도를 알고 싶어함. 이번주 우리반과 옆반의 실내온도 데이터를 쿼리한 후 각 반의 평균 실내온도 차이를 계산하여 반환하면 됨.", "Expectations": ["이번주 우리반의 평균 실내온도({{이번주_우리반_실내온도_평균}}℃)는 옆반의 평균 실내온도({{이번주_옆반_실내온도_평균}}℃)보다 {{이번주_실내온도_평균의_차이}}℃ 높습니다."], "Script": ["v_이번주_우리반_실내온도_df = \"SELECT (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"roomtemp\", \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('02_I81')) AND timestamp >= TIMESTAMP '2022-09-26 00:00:00' AND timestamp < TIMESTAMP '2022-10-03 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_이번주_옆반_실내온도_df = \"SELECT (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"roomtemp\", \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5')) AND timestamp >= TIMESTAMP '2022-09-26 00:00:00' AND timestamp < TIMESTAMP '2022-10-03 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_이번주_우리반_실내온도_평균 = v_이번주_우리반_실내온도_df['roomtemp'].mean()", "v_이번주_옆반_실내온도_평균 = v_이번주_옆반_실내온도_df['roomtemp'].mean()", "v_이번주_실내온도_평균의_차이 = v_이번주_우리반_실내온도_평균 - v_이번주_옆반_실내온도_평균"]}}, {"Input": "2주전 가장 더웠던 날 알려줘", "Scenario": "scenario2", "Metadata": {"idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}, "current_datetime": "2022-09-29 21:30:00"}, "Candidate": {"Thinking": "2주전은 정확히 말하면 2주전 한주 (월~일)동안임. 사용자는 2주전 월요일부터 일요일까지 실내온도가 최고였던 날짜를 알고 싶어함. 2주전 실내온도를 쿼리한 후 실내온도가 최고인 날을 찾아 그 날짜와 온도를 반환하면 됨.", "Expectations": ["2주전 가장 더웠던 날은 {{2주전_실내온도_최고_날짜}}로 {{2주전_실내온도_최고}}℃였습니다."], "Script": ["v_2주전_실내온도_df = \"SELECT (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"roomtemp\", \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5', '01_IB7', '02_I81')) AND timestamp >= TIMESTAMP '2022-09-19 00:00:00' AND timestamp < TIMESTAMP '2022-09-26 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_2주전_실내온도_최고 = v_2주전_실내온도_df['roomtemp'].max()", "v_2주전_실내온도_최고_df = v_2주전_실내온도_df[v_2주전_실내온도_df['roomtemp'] == v_2주전_실내온도_최고]", "v_2주전_실내온도_최고_날짜 = get_time(v_2주전_실내온도_최고_df, fmt='date')"]}}, {"Input": "화성의 설정온도 확인해줘", "Scenario": "scenario2", "Metadata": {"idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}, "current_datetime": "2022-09-29 21:30:00"}, "Candidate": {"Thinking": "사용자는 화성의 현재 설정온도를 알고 싶어함. 현재 화성의 설정온도가 기록된 경우 그 값을 반환하고, 기록된 경우 아니면 Unknown를 반환하면 됨.", "Expectations": ["화성의 설정온도는 {{현재_화성_설정온도}}℃입니다."], "Script": ["v_현재_화성_설정온도_df = \"SELECT \"settemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5', '01_IB7')) AND \"settemp\" IS NOT NULL AND \"settemp\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \"data_t\") ORDER BY timestamp\"", "v_현재_화성_설정온도 = v_현재_화성_설정온도_df['settemp'].values[0]"]}}, {"Input": "옆반 습도 알려줘", "Scenario": "scenario2", "Metadata": {"idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}, "current_datetime": "2022-09-29 21:30:00"}, "Candidate": {"Thinking": "사용자는 옆반의 현재 습도를 알고싶어함. 현재 옆반의 습도값을 쿼리한 후 반환하면 됨.", "Expectations": ["옆반의 현재 습도는 {{현재_옆반_습도}}%입니다."], "Script": ["v_현재_옆반_습도_df = \"SELECT (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"settemp\", \"roomtemp\", \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5')) AND \"settemp\" IS NOT NULL AND \"settemp\" IS DISTINCT FROM 'NaN' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \"data_t\") ORDER BY timestamp\"", "v_현재_옆반_습도 = v_현재_옆반_습도_df['roomtemp'].values[0]"]}}, {"Input": "지난 3일 동안 우리반 실내 온도 평균 값 알려줘.", "Scenario": "scenario2", "Metadata": {"idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}, "current_datetime": "2022-09-29 21:30:00"}, "Candidate": {"Thinking": "사용자는 지난 3일 우리반의 실내온도 평균을 알고싶어함. 해당 기간의 실내온도 데이터를 쿼리한 후 평균값을 계산하여 반환하면 됨.", "Expectations": ["지난 3일 우리반의 실내온도 평균은 {{지난3일_우리반_실내온도_평균}}℃였습니다."], "Script": ["v_지난3일_우리반_실내온도_df = \"SELECT (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"roomtemp\", \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('02_I81')) AND timestamp >= TIMESTAMP '2022-09-26 00:00:00' AND timestamp < TIMESTAMP '2022-09-27 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_지난3일_우리반_실내온도_평균 = v_지난3일_우리반_실내온도_df['roomtemp'].mean()"]}}, {"Input": "오늘 오후 5시에 옆반의 설정온도는 어땠어?", "Scenario": "scenario2", "Metadata": {"idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}, "current_datetime": "2022-09-29 21:30:00"}, "Candidate": {"Thinking": "사용자는 오늘 오후 5시에 옆반의 설정온도를 알고 싶어함. 오전 5시부터 오후 5시까지의 설정온도 데이터를 쿼리한 후 반환하면 됨.", "Expectations": ["오늘 오후 5시에 옆반의 설정온도는 {{오후5시_옆반_설정온도}}℃였습니다."], "Script": ["v_오후5시_옆반_설정온도_df = \"SELECT \"settemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5')) AND timestamp = TIMESTAMP '2022-09-30 17:00:00' AND \"settemp\" IS NOT NULL AND \"settemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_오후5시_옆반_설정온도 = v_오후5시_옆반_설정온도_df['settemp']"]}}, {"Input": "올해 여름 우리반 실내온도 최대값과 최소값 알려줘", "Scenario": "scenario2", "Metadata": {"idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}, "current_datetime": "2022-09-29 21:30:00"}, "Candidate": {"Thinking": "사용자는 올해 6월 ~ 8월 우리반의 실내온도 최대와 최소값을 알고 싶어함. 올해 여름(6월 ~ 8월) 우리반의 실내온도를 쿼리한 후 최대와 최소 실내온도를 찾아 그 값을 반환하면 됨.", "Expectations": ["올해 여름(6월 ~ 8월) 우리반의 실내온도 최대값은 {{올해여름_우리반_실내온도_최대}}℃이고, 최소값은 {{올해여름_우리반_실내온도_최소}}℃였습니다."], "Script": ["v_올해여름_우리반_실내온도_df = \"SELECT (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"roomtemp\", \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('02_I81')) AND timestamp >= DATE '2022-06-01' AND timestamp < DATE '2022-09-01' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_올해여름_우리반_실내온도_최대 = v_올해여름_우리반_실내온도_df['roomtemp'].max()", "v_올해여름_우리반_실내온도_최소 = v_올해여름_우리반_실내온도_df['roomtemp'].min()"]}}, {"Input": "우리반과 앞반 중 가장 더운 방은?", "Scenario": "scenario2", "Metadata": {"idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}, "current_datetime": "2022-09-29 21:30:00"}, "Candidate": {"Thinking": "사용자는 현재 우리반과 앞반 중 실내온도가 더 높은 방을 알고싶어함. 현재 우리반과 앞반의 실내온도를 쿼리한 후 더 높은 실내온도를 가진 방과 그 온도를 반환하면 됨.", "Expectations": ["현재 우리반과 앞반 중 {{현재_실내온도_최고_방}}이(가) {{현재_실내온도_최고_방_실내온도}}℃로 가장 더워요."], "Script": ["v_현재_우리반_실내온도_df = \"SELECT (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"roomtemp\", \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5', '01_IB7')) AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \"data_t\") ORDER BY timestamp\"", "v_현재_앞반_실내온도_df = \"SELECT (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"roomtemp\", \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5', '01_IB7')) AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \"data_t\") ORDER BY timestamp\"", "v_현재_실내온도 = {'우리반': v_현재_우리반_실내온도_df['roomtemp'].values[0], '앞반': v_현재_앞반_실내온도_df['roomtemp'].values[0]}", "v_현재_실내온도_최고 = max(v_현재_실내온도.values())", "v_현재_실내온도_최고_방, v_현재_실내온도_최고_방_실내온도 = ('우리반', v_현재_실내온도['우리반']) if v_현재_실내온도['우리반'] == v_현재_실내온도_최고 else ('앞반', v_현재_실내온도['앞반'])"]}}, {"Input": "지금 4층 평균 실내온도 알려줘", "Scenario": "scenario2", "Metadata": {"idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}, "current_datetime": "2022-09-29 21:30:00"}, "Candidate": {"Thinking": "사용자는 현재 4층의 평균 실내온도를 알고싶어함. 현재 4층에 속한 모든 공간의 실내온도 데이터를 쿼리한 후 평균값을 반환하면 됨.", "Expectations": ["지금 4층의 평균 실내온도는 {{현재_4층_실내온도_평균}}℃ 입니다."], "Script": ["v_현재_4층_실내온도_df = \"SELECT (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"roomtemp\", \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5', '01_IB7', '02_I81')) AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \"data_t\") ORDER BY timestamp\"", "v_현재_4층_실내온도_평균 = v_현재_4층_실내온도_df['roomtemp'].mean()"]}}]