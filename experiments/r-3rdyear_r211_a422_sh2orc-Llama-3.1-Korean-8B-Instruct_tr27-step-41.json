[{"Input": "이번주 우리반과 앞반의 평균 온도 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 이번주 우리반과 앞반의 평균 실내온도를 알고싶어함. 이번주 우리반과 앞반의 실내온도 데이터를 쿼리한 후 각 반의 평균 실내온도 및 그 차이를 계산하여 반환하면 됨.", "Expectations": ["이번주 우리반의 평균 실내온도는 {{이번주_우리반_실내온도_평균}}℃이고, 앞반의 평균 실내온도는 {{이번주_앞반_실내온도_평균}}℃입니다. 차이는 {{이번주_실내온도_평균의_차이}}℃입니다."], "Mapping": {"temporal": {"이번주": "[DATE_TRUNC('week', DATE 'CURRENT_DATE'), DATE_TRUNC('week', DATE 'CURRENT_DATE' + INTERVAL '1 week'))"}, "spatials": {"우리반": "02_I81", "앞반": "01_IB7"}, "modalities": {"실내온도": "roomtemp"}}, "Script": ["v_이번주_우리반_실내온도_df = data(t='이번주',s='우리반',m='실내온도')", "v_이번주_앞반_실내온도_df = data(t='이번주',s='앞반',m='실내온도')", "v_이번주_우리반_실내온도_평균 = v_이번주_우리반_실내온도_df['실내온도'].mean()", "v_이번주_앞반_실내온도_평균 = v_이번주_앞반_실내온도_df['실내온도'].mean()", "v_이번주_실내온도_평균의_차이 = v_이번주_우리반_실내온도_평균 - v_이번주_앞반_실내온도_평균"]}}, {"Input": "현재 설정온도랑 실내온도 차이 알려줘.", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 현재 우리반의 설정온도와 실내온도 차이를 알고 싶어함. 현재 설정온도와 실내온도를 쿼리한 후 차이를 계산하여 반환하면 됨.", "Expectations": ["현재 우리반의 설정온도({{현재_우리반_설정온도}}℃)는 실내온도({{현재_우리반_실내온도}}℃)보다 {{현재_우리반_설정온도-현재_우리반_실내온도}}℃ 높습니다."], "Mapping": {"temporal": {"현재": "LAST_RECORD"}, "spatials": {"우리반": "02_I81"}, "modalities": {"설정온도": "settemp", "실내온도": "roomtemp"}}, "Script": ["v_현재_우리반_df = data(t='현재',s='우리반',m=['설정온도','실내온도'])", "v_현재_우리반_설정온도, v_현재_우리반_실내온도 = v_현재_우리반_df['설정온도'], v_현재_우리반_df['실내온도']"]}}, {"Input": "지난달에 설정온도와 실내온도 차이가 가장 많이 났던 날은?", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 지난달 설정온도와 실내온도 차이가 가장 컸던 날짜를 알고 싶어함. 지난달 설정온도와 실내온도 데이터를 쿼리한 후 차이를 계산하면 됨.", "Expectations": ["지난달 {{지난달_설정온도와_실내온도_차이_최고_날짜}}에 설정온도({{지난달_설정온도와_실내온도_차이_최고_설정온도}}℃)와 실내온도({{지난달_설정온도와_실내온도_차이_최고_실내온도}}℃) 차이가 {{지난달_설정온도와_실내온도_차이_최고}}℃로 가장 컸습니다."], "Mapping": {"temporal": {"지난달": "[DATE_TRUNC('month', DATE 'CURRENT_DATE') - INTERVAL '1 month', DATE_TRUNC('month', DATE 'CURRENT_DATE'))"}, "spatials": {"우리반": "02_I81", "옆반": "01_IB5", "앞반": "01_IB7"}, "modalities": {"설정온도": "settemp", "실내온도": "roomtemp"}}, "Script": ["v_지난달_설정온도와_실내온도_df = data(t='지난달',s=['우리반','옆반','앞반'],m=['설정온도','실내온도'])", "v_지난달_설정온도와_실내온도_df['설정온도_실내온도_차이'] = v_지난달_설정온도와_실내온도_df['설정온도'] - v_지난달_설정온도와_실내온도_df['실내온도']", "v_지난달_설정온도와_실내온도_차이_최고 = v_지난달_설정온도와_실내온도_df['설정온도_실내온도_차이'].max()", "v_지난달_설정온도와_실내온도_df_v_지난달_설정온도와_실내온도_차이_최고 = v_지난달_설정온도와_실내온도_df[v_지난달_설정온도와_실내온도_df['설정온도_실내온도_차이'] == v_지난달_설정온도와_실내온도_차이_최고]", "v_지난달_설정온도와_실내온도_차이_최고_날짜 = get_time(v_지난달_설정온도와_실내온도_df_v_지난달_설정온도와_실내온도_차이_최고, fmt='date')", "v_지난달_설정온도와_실내온도_차이_최고_설정온도 = v_지난달_설정온도와_실내온도_df_v_지난달_설정온도와_실내온도_차이_최고['설정온도'].values[0]", "v_지난달_설정온도와_실내온도_차이_최고_실내온도 = v_지난달_설정온도와_실내온도_df_v_지난달_설정온도와_실내온도_차이_최고['실내온도'].values[0]"]}}, {"Input": "이번주 우리반과 옆반의 평균 실내온도 차이 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 이번주 우리반과 옆반의 평균 실내온도를 알고 싶어함. 이번주 우리반과 옆반의 실내온도 데이터를 쿼리한 후 각 반의 평균 실내온도 및 그 차이를 계산하여 반환하면 됨.", "Expectations": ["이번주 우리반의 평균 실내온도는 {{이번주_우리반_실내온도_평균}}℃이고, 옆반의 평균 실내온도는 {{이번주_옆반_실내온도_평균}}℃입니다. 차이는 {{이번주_실내온도_평균의_차이}}℃입니다."], "Mapping": {"temporal": {"이번주": "[DATE_TRUNC('week', DATE 'CURRENT_DATE'), DATE_TRUNC('week', DATE 'CURRENT_DATE' + INTERVAL '1 week'))"}, "spatials": {"우리반": "02_I81", "옆반": "01_IB5"}, "modalities": {"실내온도": "roomtemp"}}, "Script": ["v_이번주_우리반_실내온도_df = data(t='이번주',s='우리반',m='실내온도')", "v_이번주_옆반_실내온도_df = data(t='이번주',s='옆반',m='실내온도')", "v_이번주_우리반_실내온도_평균 = v_이번주_우리반_실내온도_df['실내온도'].mean()", "v_이번주_옆반_실내온도_평균 = v_이번주_옆반_실내온도_df['실내온도'].mean()", "v_이번주_실내온도_평균의_차이 = v_이번주_우리반_실내온도_평균 - v_이번주_옆반_실내온도_평균"]}}, {"Input": "2주전 가장 더웠던 날 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "2주전 정확히 말하면 2주전 한주 (월~일) 우리반의 실내온도가 가장 더웠던 날짜를 쿼리한 후 반환하면 됨. 반환형식은 '2주전 월요일 우리반은 {{2주전월요일_우리반_실내온도_최대}}℃로 가장 더웠습니다.'야야. ", "Expectations": ["2주전 월요일 우리반은 {{2주전월요일_우리반_실내온도_최대}}℃로 가장 더웠습니다."], "Mapping": {"temporal": {"2주전": "[DATE_TRUNC('week', DATE 'CURRENT_DATE' - INTERVAL '2 week'), DATE_TRUNC('week', DATE 'CURRENT_DATE' - INTERVAL '1 week'))"}, "spatials": {"우리반": "02_I81"}, "modalities": {"실내온도": "roomtemp"}}, "Script": ["v_2주전월요일_우리반_실내온도_df = data(t='2주전',s='우리반',m='실내온도')", "v_2주전월요일_우리반_실내온도_최대 = v_2주전월요일_우리반_실내온도_df['실내온도'].max()"]}}, {"Input": "화성의 설정온도 확인해줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 현재 화성의 설정온도를 알고 싶어함. 현재 화성의 설정온도를 쿼리한 후 반환하면 됨.", "Expectations": ["화성의 현재 설정온도는 {{현재_화성_설정온도}}℃입니다."], "Mapping": {"temporal": {"현재": "LAST_RECORD"}, "spatials": {"화성": "Unknown"}, "modalities": {"설정온도": "settemp"}}}}, {"Input": "옆반 습도 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 옆반의 현재 습도를 알고 싶어함. 현재 옆반의 습도를 쿼리한 후 반환하면 됨.", "Expectations": ["옆반의 현재 습도는 {{현재_옆반_습도}}%입니다."], "Mapping": {"temporal": {"현재": "LAST_RECORD"}, "spatials": {"옆반": "01_IB5"}, "modalities": {"습도": "Unknown"}}}}, {"Input": "지난 3일 동안 우리반 실내 온도 평균 값 알려줘.", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 지난 3일 우리반의 실내온도 평균을 알고싶어함. 해당 기간의 실내온도 데이터를 쿼리한 후 평균값을 계산하면 됨.", "Expectations": ["지난 3일 우리반의 실내온도 평균은 {{지난3일_우리반_실내온도_평균}}℃였습니다."], "Mapping": {"temporal": {"지난3일": "[DATE_TRUNC('day', DATE 'CURRENT_DATE') - INTERVAL '3 day', DATE_TRUNC('day', DATE 'CURRENT_DATE'))"}, "spatials": {"우리반": "02_I81"}, "modalities": {"실내온도": "roomtemp"}}, "Script": ["v_지난3일_우리반_실내온도_df = data(t='지난3일',s='우리반',m='실내온도')", "v_지난3일_우리반_실내온도_평균 = v_지난3일_우리반_실내온도_df['실내온도'].mean()"]}}, {"Input": "오늘 오후 5시에 옆반의 설정온도는 어땠어?", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 오늘 오후 5시에 옆반의 설정온도를 알고 싶어함. 해당 시간대의 설정온도 데이터를 쿼리한 후 반환하면 됨.", "Expectations": ["오늘 오후 5시 옆반의 설정온도는 {{오늘오후5시_옆반_설정온도}}℃였습니다."], "Mapping": {"temporal": {"오늘오후5시": "DATE_TRUNC('day', DATE 'CURRENT_DATE') + INTERVAL '17 hours'"}, "spatials": {"옆반": "01_IB5"}, "modalities": {"설정온도": "settemp"}}, "Script": ["v_오늘오후5시_옆반_설정온도_df = data(t='오늘오후5시',s='옆반',m='설정온도')", "v_오늘오후5시_옆반_설정온도 = v_오늘오후5시_옆반_설정온도_df['설정온도']"]}}, {"Input": "올해 여름 우리반 실내온도 최대값과 최소값 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 올해 6월 ~ 8월 우리반의 실내온도 최대와 최소를 알고 싶어함. 올해 여름(6월 ~ 8월) 우리반의 실내온도를 쿼리한 후 최대와 최소 실내온도를 찾아 그 값을 반환하면 됨.", "Expectations": ["올해 여름 우리반의 실내온도는 {{올해여름_우리반_실내온도_최대}}℃로 가장 더웠고, {{올해여름_우리반_실내온도_최소}}℃로 가장 추웠습니다."], "Mapping": {"temporal": {"올해여름": "[DATE 'CURRENT_YEAR-06-01', DATE 'CURRENT_YEAR-09-01')"}, "spatials": {"우리반": "02_I81"}, "modalities": {"실내온도": "roomtemp"}}, "Script": ["v_올해여름_우리반_실내온도_df = data(t='올해여름',s='우리반',m='실내온도')", "v_올해여름_우리반_실내온도_최대 = v_올해여름_우리반_실내온도_df['실내온도'].max()", "v_올해여름_우리반_실내온도_최소 = v_올해여름_우리반_실내온도_df['실내온도'].min()"]}}, {"Input": "우리반과 앞반 중 가장 더운 방은?", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": "<|finetune_right_pad_id|><|finetune_right_pad_id|><|finetune_right_pad_id|><|finetune_right_pad_id|><|finetune_right_pad_id|><|finetune_right_pad_id|><|finetune_right_pad_id|><|finetune_right_pad_id|><|finetune_right_pad_id|><|finetune_right_pad_id|><|begin_of_text|><|start_header_id|>system<|end_header_id|>\n\nCutting Knowledge Date: December 2023\nToday Date: 26 Jul 2024\n\n너는 유저의 HVAC 관련 질문에 답변하는 Agent의 계획을 설계하는 정확하고 훌룡한 인공지능이다. \n사용자의 질문(Input)을 받아 Agent의 Instructions를 출력해 주어야 한다.\nThinking에서는 HVAC 상식을 바탕으로 유저의 의도를 추측해 빠진 context를 추측하여 질문의 모호함을 없앤 완벽한 형태의 질문을 출력하고, 이에 대한 답변 계획을 세워야함.\nExpectation에서는 유저가 기대할만한 답변을 추측해야함.\nMapping에서는 질문에 사용된 high-level taxonomy를 metadata를 바탕으로 low-level taxonomy로의 mapping을 계산하여야 함.\n이때 metadata에 없는 정보를 기술하는 등 거짓된 출력을 하면 안되고, 모르는 정보가 있으면 Unknown이라 답변해야함.\nScript에서는 data 함수를 이용하여 pandas dataframe 형식의 데이터를 쿼리하여 답변에 필요한 연산을 python 스크립트를 짜 수행한다. 이때 실행 에러에 조심한다. python\nExpectation의 명시된 모든 variable이 script에서 계산되야 한다.\njson형식으로 출력하며, eval() 함수를 사용할 수 있도록 괄호들과 따옴표들의 순서와 닫힘을 매우 신경써서 출력해야한다.<|eot_id|><|start_header_id|>user<|end_header_id|>\n\nMetadata:{'current_datetime': '2022-09-29 21:30:00', 'idu_mapping': {'01_IB5': ['옆반', '4층'], '01_IB7': ['앞반', '4층'], '02_I81': ['우리반', '4층']},'modality_mapping': {'roomtemp': ['실내온도'],'settemp': ['설정온도']}};Input:우리반과 앞반 중 가장 더운 방은?;<|eot_id|><|start_header_id|>assistant<|end_header_id|>\n\n{\"Thinking\": \"사용자는 현재 우리반과 앞반 중 실내온도가 더 높은 방을 알고싶어함. 현재 우리반과 앞반의 실내온도를 쿼리한 후 더 높은 실내온도를 가진 방과 그 온도를 반환하면 됨.\", \"Expectations\": [\"{{현재_실내온도_최고_방}}({{현재_실내온도_최고_방_실내온도}}℃)이 {{현재_실내온도_ 최저_방}}({{현재_실내온도_최저_방_실내온도}}℃)보다 {{현재_실내온도_차이}}℃ 더 높습니다.\"], \"Mapping\": {\"temporal\": {\"현재\": \"LAST_RECORD\"}, \"spatials\": {\"우리반\": \"02_I81\", \"앞반\": \"01_IB7\"}, \"modalities\": {\"실내온도\": \"roomtemp\"}}, \"Script\": [\"v_현재_우리반_실내온도_df = data(t='현재',s='우리반',m='실내온도')\", \"v_현재_앞반_실내온도_df = data(t='현재',s='앞반',m='실내온도')\", \"v_현재_실내온도 = {'우리반': v_현재_우리반_실내온도_df['실내온도'].values[0], '앞반': v_현재_앞반_실내온도_df['실내온도'].values[0]}\", \"v_현재_실내온도_최고_방, v_현재_실내온도_최저_방 = ('우리반', '앞반') if v_현재_실내온도['우리반'] > v_현재_실내온도['앞반'] else ('앞반', '우리반')\", \"v_현재_실내온도_최고_방_실내온도 = v_현재_실내온도[v_현재_실내온도_최고_방]\nv_현재_실내온도_최저_방_실내온도 = v_현재_실내온도[v_현재_실내온도_최저_방]\nv_현재_실내온도_차이 = abs(v_현재_실내온도[v_현재_실내온도_최고_방] - v_현재_실내온도[v_현재_실내온도_최저_방])\nv_현재_실내온도_최고_방_설명 = '현재_실내온도_최고_방' + '_실내온도' +'(' + '현재_실내온도_최고_방' + ')'\nv_현재_실내온도_최저_방_설명 = '현재_실내온도_최저_방' + '_실내온도' +'(' + '현재_실내온도_최저_방' + ')'\nv_Expectations = ['{{현재_실내온도_최고_방}}({{현재_실내온도_최고_방_실내온도}}℃)이 {{현재_실내온도_최저_방}}({{현재_실내온도_최저_방_실내온도}}℃)보다 {{현재_실내온도_차이}}℃ 더 높습니다.']\nv_Script = ['v_현재_실내온도_df = pd.concat([v_현재_우리반_실내온도_df, v_현재_앞반_실내온도_df])', 'v_현재_실내온도 = {' + ', '.join([\"'{}': {}\".format(s, v_현재_실내온도_df[v_현재_실내온도_df['공간'] == s]['실내온도'].values[0]) for s in set(v_현재_실내온도_df['공간'])]) + '}', 'v_현재_실내온도_최고_방, v_현재_실내온도_최저_방 = (' + \"' + ', '.join([s for s in set(v_현재_실내온도_df['공간']) if v_현재_실내온도[s] == max(v_현재_실내온도.values())]) + '), (' + \"' + ', '.join([s for s in set(v_현재_실내온도_df['공간']) if v_현재_실내온도[s] == min(v_현재_실내온도.values())]) + ')', 'v_현재_실내온도_최고_방_실내온도 = v_현재_실내온도[v_현재_실내온도_최고_방]', 'v_현재_실내온도_최저_방_실내온도 = v_현재_실내온도[v_현재_실내온도_최저_방]', 'v_현재_실내온도_차이 = abs(v_현재_실내온도[v_현재_실내온도_최고_방] - v_현재_실내온도[v_현재_실내온도_최저_방])', 'v_현재_실내온도_최고_방_설명 = \\'현재_실내온도_최고_방\\' + \\'_실내온도\\' +'+ '\\'(' + \\'현재_실내온도_최고_방\\' + ')\\'', 'v"}, {"Input": "지금 4층 평균 실내온도 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 현재 4층의 평균 실내온도를 알고싶어함. 현재 4층에 속한 모든 공간의 실내온도 데이터를 쿼리한 후 평균값을 반환하면 됨.", "Expectations": ["지금 4층의 평균 실내온도는 {{현재_4층_실내온도_평균}}℃ 입니다."], "Mapping": {"temporal": {"현재": "LAST_RECORD"}, "spatials": {"4층": ["01_IB5", "01_IB7"], "옆반": "01_IB5", "앞반": "01_IB7"}, "modalities": {"실내온도": "roomtemp"}}, "Script": ["v_현재_4층_실내온도_df = data(t='현재',s='4층',m='실내온도')", "v_현재_4층_실내온도_평균 = v_현재_4층_실내온도_df['실내온도'].mean()"]}}]