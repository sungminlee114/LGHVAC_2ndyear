[{"Input": "이번주 우리반과 앞반의 평균 온도 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 이번주 우리반과 앞반의 평균 실내온도를 알고싶어함. 이번주 우리반과 앞반의 실내온도 데이터를 쿼리한 후 각 반의 평균 실내온도를 계산하여 반환하면 됨.", "Expectations": ["이번주 우리반의 평균 실내온도는 {{이번주_우리반_실내온도_평균}}℃이고, 앞반의 평균 실내온도는 {{이번주_앞반_실내온도_평균}}℃입니다."], "Script": ["v_이번주_우리반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('02_I81')) AND timestamp >= TIMESTAMP '2022-09-26 00:00:00' AND timestamp < TIMESTAMP '2022-10-03 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_이번주_앞반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB7')) AND timestamp >= TIMESTAMP '2022-09-26 00:00:00' AND timestamp < TIMESTAMP '2022-10-03 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_이번주_우리반_실내온도_평균 = v_이번주_우리반_실내온도_df['roomtemp'].mean()", "v_이번주_앞반_실내온도_평균 = v_이번주_앞반_실내온도_df['roomtemp'].mean()"]}}, {"Input": "현재 설정온도랑 실내온도 차이 알려줘.", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": "<|finetune_right_pad_id|><|finetune_right_pad_id|><|finetune_right_pad_id|><|finetune_right_pad_id|><|finetune_right_pad_id|><|finetune_right_pad_id|><|finetune_right_pad_id|><|begin_of_text|><|start_header_id|>system<|end_header_id|>\n\nCutting Knowledge Date: December 2023\nToday Date: 26 Jul 2024\n\n너는 유저의 HVAC 관련 질문에 답변하는 Agent의 계획을 설계하는 정확하고 훌룡한 인공지능이다. \n사용자의 질문(Input)을 받아 Agent의 Instructions를 출력해 주어야 한다.\nThinking에서는 HVAC 상식을 바탕으로 유저의 의도를 추측해 빠진 context를 추측하여 질문의 모호함을 없앤 완벽한 형태의 질문을 출력하고, 이에 대한 답변 계획을 세워야함.\nExpectation에서는 유저가 기대할만한 답변을 추측해야함.\nExpectation의 명시된 모든 variable이 script에서 계산되야 한다.\njson형식으로 출력하며, eval() 함수를 사용할 수 있도록 괄호들과 따옴표들의 순서와 닫힘을 매우 신경써서 출력해야한다.<|eot_id|><|start_header_id|>user<|end_header_id|>\n\nMetadata:{'current_datetime': '2022-09-29 21:30:00', 'idu_mapping': {'01_IB5': ['옆반', '4층'], '01_IB7': ['앞반', '4층'], '02_I81': ['우리반', '4층']},'modality_mapping': {'roomtemp': ['실내온도'],'settemp': ['설정온도']}};Input:현재 설정온도랑 실내온도 차이 알려줘.;<|eot_id|><|start_header_id|>assistant<|end_header_id|>\n\n{\"Thinking\": \"사용자는 현재 우리반의 설정온도와 실내온도 차이를 알고 싶어함. 현재 우리반의 설정온도와 실내온도를 쿼리한 후 차이를 계산하여 반환하면 됨.\", \"Expectations\": [\"현재 우리반의 설정온도({{현재_우리반_설정온도}}℃)와 실내온도({{현재_우리반_실내온도}}℃) 차이는 {{현재_우리반_실내온도_설정온도 차이}}℃입니다.\"], \"Script\": [\"v_현재_우리반_df = \\\"SELECT \\\"settemp\\\", \\\"roomtemp\\\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \\\"timestamp\\\" FROM \\\"data_t\\\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_I81')) AND \\\"settemp\\\" IS NOT NULL AND \\\"settemp\\\" IS DISTINCT FROM 'NaN' AND \\\"roomtemp\\\" IS NOT NULL AND \\\"roomtemp\\\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \\\"data_t\\\") ORDER BY timestamp\\\"\", \"v_현재_우리반_설정온도, v_현재_우리반_실내온도 = v_현재_우리반_df['settemp'], v_현재_우리반_df['roomtemp'] = v_현재_우리반_df['settemp'], v_현재_우리반_df['roomtemp'] = v_현재_우리반_df['settemp'], v_현재_우리반_df['roomtemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp'] = v_현재_우리반_df['settemp']"}, {"Input": "지난달에 설정온도와 실내온도 차이가 가장 많이 났던 날은?", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 지난달 우리반 설정온도와 실내온도 차이가 가장 컸던 날짜를 알고 싶어함. 지난달 우리반의 설정온도와 실내온도 데이터를 쿼리한 후 차이를 계산하면 됨.", "Expectations": ["지난달 {{지난달_우리반_온도차이_최고_날짜}}에 설정온도({{지난달_우리반_온도차이_최고_설정온도}}℃)와 실내온도({{지난달_우리반_온도차이_최고_실내온도}}℃) 차이가 {{지난달_우리반_온도차이_최고}}℃로 가장 컸습니다."], "Script": ["v_지난달_우리반_df = \"SELECT \"settemp\", \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('02_I81')) AND timestamp >= TIMESTAMP '2022-08-01 00:00:00' AND timestamp < TIMESTAMP '2022-09-01 00:00:00' AND \"settemp\" IS NOT NULL AND \"settemp\" IS DISTINCT FROM 'NaN' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_지난달_우리반_df['온도차이'] = v_지난달_우리반_df['settemp'] - v_지난달_우리반_df['roomtemp']", "v_지난달_우리반_온도차이_최고 = v_지난달_우리반_df['온도차이'].max()", "v_지난달_우리반_온도차이_최고_df = v_지난달_우리반_df[v_지난달_우리반_df['온도차이'] == v_지난달_우리반_온도차이_최고]", "v_지난달_우리반_온도차이_최고_날짜 = get_time(v_지난달_우리반_온도차이_최고_df, fmt='date')", "v_지난달_우리반_온도차이_최고_설정온도 = v_지난달_우리반_온도차이_최고_df['settemp'].values[0]", "v_지난달_우리반_온도차이_최고_실내온도 = v_지난달_우리반_온도차이_최고_df['roomtemp'].values[0]"]}}, {"Input": "이번주 우리반과 옆반의 평균 실내온도 차이 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 이번주 우리반과 옆반의 평균 실내온도를 알고 그 차이를 알고 싶어함. 이번주 우리반과 옆반의 평균 실내온도를 쿼리한 후 차이를 계산하여 반환하면 됨.", "Expectations": ["이번주 우리반의 평균 실내온도({{이번주_우리반_실내온도_평균}}℃)는 옆반의 평균 실내온도({{이번주_옆반_실내온도_평균}}℃)보다 {{이번주_실내온도_평균의_차이}}℃ 높습니다."], "Script": ["v_이번주_우리반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('02_I81')) AND timestamp >= TIMESTAMP '2022-09-26 00:00:00' AND timestamp < TIMESTAMP '2022-10-03 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_이번주_옆반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5')) AND timestamp >= TIMESTAMP '2022-09-26 00:00:00' AND timestamp < TIMESTAMP '2022-10-03 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_이번주_우리반_실내온도_평균 = v_이번주_우리반_실내온도_df['roomtemp'].mean()", "v_이번주_옆반_실내온도_평균 = v_이번주_옆반_실내온도_df['roomtemp'].mean()", "v_이번주_실내온도_평균의_차이 = v_이번주_우리반_실내온도_평균 - v_이번주_옆반_실내온도_평균"]}}, {"Input": "2주전 가장 더웠던 날 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "2주전은 정확히 말하면 2주전 한주 (월~일)동안임. 사용자는 2주전 월요일부터 일요일까지 우리반이 가장 더웠던 날짜를 알고 싶어함. 2주전 우리반의 실내온도가 가장 높은 날을 쿼리한 후 그 날짜와 온도를 반환하면 됨.", "Expectations": ["2주전 우리반은 {{2주전_우리반_실내온도_최고_날짜}}에 {{2주전_우리반_실내온도_최고_온도}}℃로 가장 더웠습니다."], "Script": ["v_2주전_우리반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('02_I81')) AND timestamp >= TIMESTAMP '2022-09-12 00:00:00' AND timestamp < TIMESTAMP '2022-09-19 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_2주전_우리반_실내온도_최고_온도 = v_2주전_우리반_실내온도_df['roomtemp'].max()", "v_2주전_우리반_실내온도_최고_df = v_2주전_우리반_실내온도_df[v_2주전_우리반_실내온도_df['roomtemp'] == v_2주전_우리반_실내온도_최고_온도]", "v_2주전_우리반_실내온도_최고_날짜 = get_time(v_2주전_우리반_실내온도_최고_df, fmt='date')"]}}, {"Input": "화성의 설정온도 확인해줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 화성의 현재 설정온도를 알고 싶어함. 현재 화성의 설정온도를 쿼리한 후 반환하면 됨.", "Expectations": ["화성의 현재 설정온도는 {{현재_화성_설정온도}}℃입니다."], "Mapping": {"temporal": {"현재": "LAST_RECORD"}, "spatials": {"화성": "Unknown"}, "modalities": {"설정온도": "settemp"}}}}, {"Input": "옆반 습도 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 옆반의 현재 습도를 알고싶어함. 현재 옆반의 습도값을 쿼리한 후 반환하면 됨.", "Expectations": ["옆반의 현재 습도는 {{현재_옆반_습도}}%입니다."], "Mapping": {"temporal": {"현재": "LAST_RECORD"}, "spatials": {"옆반": "01_IB5"}, "modalities": {"습도": "Unknown"}}}}, {"Input": "지난 3일 동안 우리반 실내 온도 평균 값 알려줘.", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 지난 3일 우리반의 실내온도 평균을 알고싶어함. 해당 기간의 실내온도 데이터를 쿼리한 후 평균값을 반환하면 됨.", "Expectations": ["지난 3일 우리반의 실내온도 평균은 {{지난3일_우리반_실내온도_평균}}℃였습니다."], "Script": ["v_지난3일_우리반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('02_I81')) AND timestamp >= TIMESTAMP '2022-09-26 00:00:00' AND timestamp < TIMESTAMP '2022-09-27 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_지난3일_우리반_실내온도_평균 = v_지난3일_우리반_실내온도_df['roomtemp'].mean()"]}}, {"Input": "오늘 오후 5시에 옆반의 설정온도는 어땠어?", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 오늘 오후 5시에 옆반의 설정온도를 알고 싶어함. 해당 시간대의 설정온도 데이터를 쿼리한 후 반환하면 됨.", "Expectations": ["오늘 오후 5시 옆반의 설정온도는 {{오후5시_옆반_설정온도}}℃였습니다."], "Script": ["v_오후5시_옆반_설정온도_df = \"SELECT \"settemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5')) AND timestamp = TIMESTAMP '2022-09-29 17:00:00' AND \"settemp\" IS NOT NULL AND \"settemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_오후5시_옆반_설정온도 = v_오후5시_옆반_설정온도_df['settemp']"]}}, {"Input": "올해 여름 우리반 실내온도 최대값과 최소값 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 올해 6월 ~ 8월 우리반의 실내온도값의 최대와 최소를 알고 싶어함. 올해 여름(6월 ~ 8월) 우리반의 실내온도 데이터를 쿼리한 후 최대와 최소값을 반환하면 됨.", "Expectations": ["올해 여름(6월 ~ 8월) 우리반의 실내온도는 {{올해여름_우리반_실내온도_최대}}℃로 최대였고, {{올해여름_우리반_실내온도_최소}}℃로 최소였습니다."], "Script": ["v_올해여름_우리반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('02_I81')) AND timestamp >= DATE '2022-06-01' AND timestamp < DATE '2022-09-01' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_올해여름_우리반_실내온도_최대 = v_올해여름_우리반_실내온도_df['roomtemp'].max()", "v_올해여름_우리반_실내온도_최소 = v_올해여름_우리반_실내온도_df['roomtemp'].min()"]}}, {"Input": "우리반과 앞반 중 가장 더운 방은?", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 현재 우리반과 앞반 중 실내온도가 더 높은 방을 알고싶어함. 현재 우리반과 앞반의 실내온도를 쿼리한 후 더 높은 실내온도를 가진 방과 그 온도를 반환하면 됨.", "Expectations": ["{{현재_실내온도_최고_방}}({{현재_실내온도_최고_방_실내온도}}℃)이 {{현재_실내온도_최소_방}}({{현재_실내온도_최소_방_실내온도}}℃)보다 {{현재_실내온도_차이}}℃ 더 높습니다."], "Script": ["v_현재_우리반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_I81')) AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \"data_t\") ORDER BY timestamp\"", "v_현재_앞반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB7')) AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \"data_t\") ORDER BY timestamp\"", "v_현재_실내온도 = {'우리반': v_현재_우리반_실내온도_df['roomtemp'].values[0], '앞반': v_현재_앞반_실내온도_df['roomtemp'].values[0]}", "v_현재_실내온도_최고_방, v_현재_실내온도_최소_방 = ('우리반', '앞반') if v_현재_실내온도['우리반'] > v_현재_실내온도['앞반'] else ('앞반', '우리반')", "v_현재_실내온도_최고_방_실내온도, v_현재_실내온도_최소_방_실내온도 = (v_현재_실내온도[v_현재_실내온도_최고_방]]), v_현재_실내온도[v_현재_실내온도_최소_방]])", "v_현재_실내온도_차이 = abs(v_현재_실내온도[v_현재_실내온도_최고_방]] - v_현재_실내온도[v_현재_실내온도_최소_방]]))"]}}, {"Input": "지금 4층 평균 실내온도 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 현재 4층의 평균 실내온도를 알고싶어함. 현재 4층에 속한 모든 공간의 실내온도값을 쿼리한 후 평균값을 반환하면 됨.", "Expectations": ["지금 4층의 평균 실내온도는 {{현재_4층_실내온도_평균}}℃ 입니다."], "Mapping": {"temporal": {"현재": "LAST_RECORD"}, "spatials": {"4층": "Unknown"}, "modalities": {"실내온도": "roomtemp"}}}}, {"Input": "현재 4층에서 온도 22℃ 이상인 방들 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 현재 4층에서 실내온도 22℃ 이상인 방을 알고싶어함. 현재 4층에 속한 모든 방의 실내온도를 쿼리한 후 실내온도 22℃ 이상인 방을 반환하면 됨.", "Expectations": ["현재 4층에서 실내온도 22℃ 이상인 방은 {{현재_4층_실내온도_22℃_이상_방의_수}}개 있습니다. 그 중 가장 추운 방은 {{현재_4층_실내온도_22℃_이상_방의_실내온도_최소값}}℃로 {{현재_4층_실내온도_22℃_이상_방의_실내온도_최소값_공간적_위치}}에 있습니다."], "Script": ["v_현재_4층_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5', '01_IB7', '02_I81')) AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \"data_t\") ORDER BY timestamp\"", "v_현재_4층_실내온도_22℃_이상_방의_수 = v_현재_4층_실내온도_df[v_현재_4층_실내온도_df['roomtemp'] >= 22].shape[0]", "v_현재_4층_실내온도_22℃_이상_방의_실내온도_최소값 = v_현재_4층_실내온도_df[v_현재_4층_실내온도_df['roomtemp'] >= 22]['roomtemp'].min()", "v_현재_4층_실내온도_22℃_이상_방의_실내온도_최소값_공간적_위치 = get_spatials(v_현재_4층_실내온도_df[v_현재_4층_실내온도_df['roomtemp'] >= 22])"]}}, {"Input": "3주전 온도가 22℃ 이상이었던 날짜 알려줘", "Scenario": "scenario2", "Metadata": {"current_datetime": "2022-09-29 21:30:00", "idu_mapping": {"01_IB5": ["옆반", "4층"], "01_IB7": ["앞반", "4층"], "02_I81": ["우리반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "3주전은 정확히 말하면 3주전 한주 (월~일)동안임. 사용자는 3주전 월요일부터 일요일까지 실내온도가 22℃ 이상이었던 날짜를 알고 싶어함. 3주전 실내온도를 쿼리한 후 22℃ 이상인 날을 찾아 그 날짜를 반환하면 됨.", "Expectations": ["3주전 월요일부터 일요일까지 실내온도가 22℃ 이상이었던 날짜는 {{3주전_실내온도_22℃_이상_날짜}}였습니다."], "Script": ["v_3주전_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5', '01_IB7', '02_I81')) AND timestamp >= TIMESTAMP '2022-09-12 00:00:00' AND timestamp < TIMESTAMP '2022-09-19 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_3주전_실내온도_22℃_이상_날짜 = get_time_diff(v_3주전_실내온도_df[v_3주전_실내온도_df['roomtemp'] >= 22], fmt='date')"]}}, {"Input": "이번주 우리반과 앞반의 평균 온도 알려줘", "Scenario": "scenario3", "Metadata": {"current_datetime": "2022-09-28 22:30:00", "idu_mapping": {"01_IB5": ["앞반", "4층"], "01_IB7": ["우리반", "4층"], "02_I81": ["옆반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 이번주 우리반과 앞반의 평균 실내온도를 알고싶어함. 이번주 우리반과 앞반의 실내온도 데이터를 쿼리한 후 각 반의 평균 실내온도를 계산하여 반환하면 됨.", "Expectations": ["이번주 우리반의 평균 실내온도는 {{이번주_우리반_실내온도_평균}}℃이고, 앞반의 평균 실내온도는 {{이번주_앞반_실내온도_평균}}℃입니다."], "Script": ["v_이번주_우리반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB7')) AND timestamp >= TIMESTAMP '2022-09-26 00:00:00' AND timestamp < TIMESTAMP '2022-10-03 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_이번주_앞반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5')) AND timestamp >= TIMESTAMP '2022-09-26 00:00:00' AND timestamp < TIMESTAMP '2022-10-03 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_이번주_우리반_실내온도_평균 = v_이번주_우리반_실내온도_df['roomtemp'].mean()", "v_이번주_앞반_실내온도_평균 = v_이번주_앞반_실내온도_df['roomtemp'].mean()"]}}, {"Input": "현재 설정온도랑 실내온도 차이 알려줘.", "Scenario": "scenario3", "Metadata": {"current_datetime": "2022-09-28 22:30:00", "idu_mapping": {"01_IB5": ["앞반", "4층"], "01_IB7": ["우리반", "4층"], "02_I81": ["옆반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 현재 우리반의 설정온도와 실내온도 차이를 알고 싶어함. 현재 우리반의 설정온도와 실내온도를 쿼리한 후 차이를 계산하여 반환하면 됨.", "Expectations": ["현재 우리반의 설정온도({{현재_우리반_설정온도}}℃)와 실내온도({{현재_우리반_실내온도}}℃) 차이는 {{현재_우리반_실내온도_설정온도 차이}}℃입니다."], "Script": ["v_현재_우리반_df = \"SELECT \"settemp\", \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB7')) AND \"settemp\" IS NOT NULL AND \"settemp\" IS DISTINCT FROM 'NaN' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \"data_t\") ORDER BY timestamp\"", "v_현재_우리반_설정온도, v_현재_우리반_실내온도 = v_현재_우리반_df['settemp'], v_현재_우리반_df['roomtemp'] = v_현재_우리반_df['settemp'], v_현재_우리반_df['roomtemp'] = v_현재_우리반_df['settemp'], v_현재_우리반_df['roomtemp'] = v_현재_우리반_df['settemp'], v_현재_우리반_df['roomtemp'] = v_현재_우리반_df['settemp']"]}}, {"Input": "지난달에 설정온도와 실내온도 차이가 가장 많이 났던 날은?", "Scenario": "scenario3", "Metadata": {"current_datetime": "2022-09-28 22:30:00", "idu_mapping": {"01_IB5": ["앞반", "4층"], "01_IB7": ["우리반", "4층"], "02_I81": ["옆반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": "{\"Thinking\": \"사용자는 지난달 액티브존의 설정온도와 실내온도 차이가 가장 컸던 날짜를 알고 싶어함. 지난달 설정온도와 실내온도 데이터를 쿼리한 후 차이를 계산하면 됨.\", \"Expectations\": [\"지난달 {{지난달_설정온도_실내온도_차이_최고_날짜}}에 설정온도({{지난달_설정온도_실내온도_차이_최고_설정온도}}℃)와 실내온도({{지난달_설정온도_실내온도_차이_최고_실내온도}}℃) 차이가 {{지난달_설정온도_실내온도_차이_최고}}℃로 가장 컸습니다.\"], \"Script\": [\"v_지난달_설정온도_df = \\\"SELECT \\\"settemp\\\", \\\"roomtemp\\\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \\\"timestamp\\\" FROM \\\"data_t\\\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5', '01_IB7', '02_I81')) AND timestamp >= TIMESTAMP '2022-08-01 00:00:00' AND timestamp < TIMESTAMP '2022-09-01 00:00:00' AND \\\"settemp\\\" IS NOT NULL AND \\\"settemp\\\" IS DISTINCT FROM 'NaN' AND \\\"roomtemp\\\" IS NOT NULL AND \\\"roomtemp\\\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\\\"\", \"v_지난달_실내온도_df = \\\"SELECT \\\"settemp\\\", \\\"roomtemp\\\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \\\"timestamp\\\" FROM \\\"data_t\\\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5', '01_IB7', '02_I81')) AND timestamp >= TIMESTAMP '2022-08-01 00:00:00' AND timestamp < TIMESTAMP '2022-09-01 00:00:00' AND \\\"settemp\\\" IS NOT NULL AND \\\"settemp\\\" IS DISTINCT FROM 'NaN' AND \\\"roomtemp\\\" IS NOT NULL AND \\\"roomtemp\\\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\\\"\", \"v_지난달_설정온도_실내온도_df = pd.merge(v_지난달_설정온도_df, v_지난달_실내온도_df, on='timestamp', suffixes=('_설정온도', '_실내온도'))\", \"v_지난달_설정온도_실내온도_차이 = v_지난달_설정온도_실내온도_df['설정온도'] - v_지난달_설정온도_실내온도_df['실내온도']\", \"v_지난달_설정온도_실내온도_차이_최고 = v_지난달_설정온도_실내온도_차이[v_지난달_설정온도_실내온도_차이 == v_지난달_설정온도_실내온도_차이.max()]\", \"v_지난달_설정온도_실내온도_차이_최고_날짜 = get_time(v_지난달_설정온도_실내온도_차이_최고, fmt='date')\", \"v_지난달_설정온도_실내온도_차이_최고_설정온도 = v_지난달_설정온도_실내온도_차이_최고[v_지난달_설정온도_실내온도_차이_최고 == v_지난달_설정온도_실내온도_차이_최고.max()]\", \"v_지난달_설정온도_실내온도_차이_최고_실내온도 = v_지난달_설정온도_실내온도_차이_최고[v_지난달_설정온도_실내온도_차이_최고 == v_지난달_설정온도_실내온도_차이_최고.max()]\"\"]}"}, {"Input": "이번주 우리반과 옆반의 평균 실내온도 차이 알려줘", "Scenario": "scenario3", "Metadata": {"current_datetime": "2022-09-28 22:30:00", "idu_mapping": {"01_IB5": ["앞반", "4층"], "01_IB7": ["우리반", "4층"], "02_I81": ["옆반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 이번주 우리반과 옆반의 평균 실내온도를 알고 그 차이를 알고 싶어함. 이번주 우리반과 옆반의 평균 실내온도를 쿼리한 후 차이를 계산하여 반환하면 됨.", "Expectations": ["이번주 우리반의 평균 실내온도({{이번주_우리반_실내온도_평균}}℃)는 옆반의 평균 실내온도({{이번주_옆반_실내온도_평균}}℃)보다 {{이번주_실내온도_평균의_차이}}℃ 높습니다."], "Script": ["v_이번주_우리반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB7')) AND timestamp >= TIMESTAMP '2022-09-26 00:00:00' AND timestamp < TIMESTAMP '2022-10-03 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_이번주_옆반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('02_I81')) AND timestamp >= TIMESTAMP '2022-09-26 00:00:00' AND timestamp < TIMESTAMP '2022-10-03 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_이번주_우리반_실내온도_평균 = v_이번주_우리반_실내온도_df['roomtemp'].mean()", "v_이번주_옆반_실내온도_평균 = v_이번주_옆반_실내온도_df['roomtemp'].mean()", "v_이번주_실내온도_평균의_차이 = v_이번주_우리반_실내온도_평균 - v_이번주_옆반_실내온도_평균"]}}, {"Input": "2주전 가장 더웠던 날 알려줘", "Scenario": "scenario3", "Metadata": {"current_datetime": "2022-09-28 22:30:00", "idu_mapping": {"01_IB5": ["앞반", "4층"], "01_IB7": ["우리반", "4층"], "02_I81": ["옆반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "2주전은 정확히 말하면 2주전 한주 (월~일)동안임. 사용자는 2주전 월요일부터 일요일까지 가장 더웠던 날짜를 알고 싶어함. 2주전-REALTIME-1주간 실내온도가 기록된 데이터를 쿼리한 후 실내온도가 가장 높은 날을 찾아 그 날짜와 온도를 반환하면 됨.", "Expectations": ["2주전 가장 더웠던 날은 {{2주전_실내온도_최고_날짜}}로 {{2주전_실내온도_최고_온도}}℃였습니다."], "Script": ["v_2주전_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5', '01_IB7', '02_I81')) AND timestamp >= TIMESTAMP '2022-09-12 00:00:00' AND timestamp < TIMESTAMP '2022-09-19 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_2주전_실내온도_최고_온도 = v_2주전_실내온도_df['roomtemp'].max()", "v_2주전_실내온도_최고_df = v_2주전_실내온도_df[v_2주전_실내온도_df['roomtemp'] == v_2주전_실내온도_최고_온도]", "v_2주전_실내온도_최고_날짜 = get_time(v_2주전_실내온도_최고_df, fmt='date')"]}}, {"Input": "화성의 설정온도 확인해줘", "Scenario": "scenario3", "Metadata": {"current_datetime": "2022-09-28 22:30:00", "idu_mapping": {"01_IB5": ["앞반", "4층"], "01_IB7": ["우리반", "4층"], "02_I81": ["옆반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 화성의 현재 설정온도를 알고 싶어함. 현재 화성의 설정온도를 쿼리한 후 반환하면 됨.", "Expectations": ["화성의 현재 설정온도는 {{현재_화성_설정온도}}℃입니다."], "Mapping": {"temporal": {"현재": "LAST_RECORD"}, "spatials": {"화성": "Unknown"}, "modalities": {"설정온도": "settemp"}}}}, {"Input": "옆반 습도 알려줘", "Scenario": "scenario3", "Metadata": {"current_datetime": "2022-09-28 22:30:00", "idu_mapping": {"01_IB5": ["앞반", "4층"], "01_IB7": ["우리반", "4층"], "02_I81": ["옆반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 옆반의 습도를 알고싶어함. 현재 옆반의 습도값을 반환하면 됨.", "Expectations": ["옆반의 습도는 {{현재_옆반_습도}}%입니다."], "Mapping": {"temporal": {"현재": "LAST_RECORD"}, "spatials": {"옆반": "02_I81"}, "modalities": {"습도": "Unknown"}}}}, {"Input": "지난 3일 동안 우리반 실내 온도 평균 값 알려줘.", "Scenario": "scenario3", "Metadata": {"current_datetime": "2022-09-28 22:30:00", "idu_mapping": {"01_IB5": ["앞반", "4층"], "01_IB7": ["우리반", "4층"], "02_I81": ["옆반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 지난 3일 우리반의 실내온도 평균을 알고싶어함. 해당 기간의 실내온도 데이터를 쿼리한 후 평균값을 반환하면 됨.", "Expectations": ["지난 3일 우리반의 실내온도 평균은 {{지난3일_우리반_실내온도_평균}}℃였습니다."], "Script": ["v_지난3일_우리반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB7')) AND timestamp >= TIMESTAMP '2022-09-25 00:00:00' AND timestamp < TIMESTAMP '2022-09-26 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_지난3일_우리반_실내온도_평균 = v_지난3일_우리반_실내온도_df['roomtemp'].mean()"]}}, {"Input": "오늘 오후 5시에 옆반의 설정온도는 어땠어?", "Scenario": "scenario3", "Metadata": {"current_datetime": "2022-09-28 22:30:00", "idu_mapping": {"01_IB5": ["앞반", "4층"], "01_IB7": ["우리반", "4층"], "02_I81": ["옆반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 오늘 오후 5시에 옆반의 설정온도를 알고 싶어함. 해당 시간대의 설정온도 데이터를 쿼리한 후 반환하면 됨.", "Expectations": ["오늘 오후 5시 옆반의 설정온도는 {{오후5시_옆반_설정온도}}℃였습니다."], "Script": ["v_오후5시_옆반_설정온도_df = \"SELECT \"settemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB7')) AND timestamp = TIMESTAMP '2022-09-28 17:00:00' AND \"settemp\" IS NOT NULL AND \"settemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_오후5시_옆반_설정온도 = v_오후5시_옆반_설정온도_df['settemp']"]}}, {"Input": "올해 여름 우리반 실내온도 최대값과 최소값 알려줘", "Scenario": "scenario3", "Metadata": {"current_datetime": "2022-09-28 22:30:00", "idu_mapping": {"01_IB5": ["앞반", "4층"], "01_IB7": ["우리반", "4층"], "02_I81": ["옆반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 올해 6월 ~ 8월 우리반의 실내온도값의 최대와 최소를 알고 싶어함. 올해 여름(6월 ~ 8월) 우리반의 실내온도 데이터를 쿼리한 후 최대와 최소 실내온도를 반환하면 됨.", "Expectations": ["올해 여름(6월 ~ 8월) 우리반의 실내온도는 {{올해여름_우리반_실내온도_최대}}℃로 최대였고, {{올해여름_우리반_실내온도_최소}}℃로 최소였습니다."], "Script": ["v_올해여름_우리반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB7')) AND timestamp >= DATE '2022-06-01' AND timestamp < DATE '2022-09-01' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_올해여름_우리반_실내온도_최대 = v_올해여름_우리반_실내온도_df['roomtemp'].max()", "v_올해여름_우리반_실내온도_최소 = v_올해여름_우리반_실내온도_df['roomtemp'].min()"]}}, {"Input": "우리반과 앞반 중 가장 더운 방은?", "Scenario": "scenario3", "Metadata": {"current_datetime": "2022-09-28 22:30:00", "idu_mapping": {"01_IB5": ["앞반", "4층"], "01_IB7": ["우리반", "4층"], "02_I81": ["옆반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 현재 우리반과 앞반 중 실내온도가 더 높은 방을 알고싶어함. 현재 우리반과 앞반의 실내온도를 쿼리한 후 더 높은 실내온도를 가진 방과 그 온도를 반환하면 됨.", "Expectations": ["{{현재_실내온도_최고_방}}({{현재_실내온도_최고_방_실내온도}}℃)이 {{현재_실내온도_낮은_방}}({{현재_실내온도_낮은_방_실내온도}}℃)보다 {{현재_실내온도_차이}}℃ 더 높습니다."], "Script": ["v_현재_우리반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB7')) AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \"data_t\") ORDER BY timestamp\"", "v_현재_앞반_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5')) AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \"data_t\") ORDER BY timestamp\"", "v_현재_실내온도 = {'우리반': v_현재_우리반_실내온도_df['roomtemp'].values[0], '앞반': v_현재_앞반_실내온도_df['roomtemp'].values[0]}", "v_현재_실내온도_최고_방, v_현재_실내온도_낮은_방 = ('우리반', '앞반') if v_현재_실내온도['우리반'] > v_현재_실내온도['앞반'] else ('앞반', '우리반')", "v_현재_실내온도_차이 = abs(v_현재_실내온도[v_현재_실내온도_최고_방] - v_현재_실내온도[v_현재_실내온도_낮은_방])", "v_현재_실내온도_최고_방_실내온도, v_현재_실내온도_낮은_방_실내온도 = v_현재_실내온도[v_현재_실내온도_최고_방], v_현재_실내온도[v_현재_실내온도_낮은_방]"]}}, {"Input": "현재 4층에서 온도 22℃ 이상인 방들 알려줘", "Scenario": "scenario3", "Metadata": {"current_datetime": "2022-09-28 22:30:00", "idu_mapping": {"01_IB5": ["앞반", "4층"], "01_IB7": ["우리반", "4층"], "02_I81": ["옆반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "사용자는 현재 4층에서 실내온도 22℃ 이상인 방을 알고싶어함. 현재 4층에 속한 모든 방의 실내온도를 쿼리한 후 실내온도 22℃ 이상인 방을 반환하면 됨.", "Expectations": ["현재 4층에서 실내온도 22℃ 이상인 방은 {{현재_4층_실내온도_22℃_이상_방의_수}}개 있습니다. 그 중 가장 추운 방은 {{현재_4층_실내온도_22℃_이상_방의_실내온도_최소_값}}℃로 {{현재_4층_실내온도_22℃_이상_방의_실내온도_최소_방의_이름}}입니다."], "Script": ["v_현재_4층_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5', '01_IB7', '02_I81')) AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' AND timestamp = (SELECT MAX(timestamp) FROM \"data_t\") ORDER BY timestamp\"", "v_현재_4층_실내온도_22℃_이상_방의_수 = v_현재_4층_실내온도_df[v_현재_4층_실내온도_df['roomtemp'] >= 22].shape[0]", "v_현재_4층_실내온도_22℃_이상_방의_실내온도_최소_값 = v_현재_4층_실내온도_df[v_현재_4층_실내온도_df['roomtemp'] >= 22]['roomtemp'].min()", "v_현재_4층_실내온도_22℃_이상_방의_실내온도_최소_방의_이름 = get_spatials(v_현재_4층_실내온도_df[v_현재_4층_실내온도_df['roomtemp'] == v_현재_4층_실내온도_22℃_이상_방의_실내온도_최소_값][['idu_name']], fmt='json')"]}}, {"Input": "3주전 온도가 22℃ 이상이었던 날짜 알려줘", "Scenario": "scenario3", "Metadata": {"current_datetime": "2022-09-28 22:30:00", "idu_mapping": {"01_IB5": ["앞반", "4층"], "01_IB7": ["우리반", "4층"], "02_I81": ["옆반", "4층"]}, "modality_mapping": {"roomtemp": ["실내온도"], "settemp": ["설정온도"]}}, "Candidate": {"Thinking": "3주전은 정확히 말하면 3주전 한주 (월~일)동안임. 사용자는 3주전 월요일부터 일요일까지 실내온도가 22℃ 이상이었던 날짜를 알고 싶어함. 3주전 실내온도를 쿼리한 후 22℃ 이상인 날을 찾아 그 날짜를 반환하면 됨.", "Expectations": ["3주전 월요일부터 일요일까지 실내온도는 총 {{3주전_실내온도_22℃이상_총날짜}}번 더더랑 {{3주전_실내온도_22℃이상_최대온도}}℃로 가장 더웠던 날입니다."], "Script": ["v_3주전_실내온도_df = \"SELECT \"roomtemp\", (SELECT name FROM idu_t WHERE id = data_t.idu_id) AS idu_name, \"timestamp\" FROM \"data_t\" WHERE idu_id IN (SELECT id FROM idu_t WHERE name IN ('01_IB5', '01_IB7', '02_I81')) AND timestamp >= TIMESTAMP '2022-09-12 00:00:00' AND timestamp < TIMESTAMP '2022-09-19 00:00:00' AND \"roomtemp\" IS NOT NULL AND \"roomtemp\" IS DISTINCT FROM 'NaN' ORDER BY timestamp\"", "v_3주전_실내온도_22℃이상_df = v_3주전_실내온도_df[v_3주전_실내온도_df['roomtemp'] > 22]", "v_3주전_실내온도_22℃이상_총날짜 = get_time(v_3주전_실내온도_22℃이상_df).count()", "v_3주전_실내온도_22℃이상_최대온도 = v_3주전_실내온도_22℃이상_df['roomtemp'].max()"]}}]