[
    {
        "Input": "지난주 3층 305호와 301호 중 어느 쪽이 더 더웠어?",
        "Tags": {
            "Style": {
                "Type": ["Implicit modality"],
                "Temporal": "지난주",
                "Spatials": ["305호", "301호"],
                "Processing": ["Avg", "ArgMax"],
                "Modality": ["실내온도"]
            },
            "Returns": [
                "Spatial"
            ]
        },
        "Response": {
            "Thinking": "사용자는 지난주 305호와 301호 중 평균 실내온도가 더 높은 곳을 알고 싶어함. 지난주 두 공간의 실내온도를 쿼리한 후 평균을 비교하여 더 높은 곳과 온도 차이를 반환하면 됨.",
            "Expectations": [
                "지난주 {{지난주_실내온도_높은_공간}}({{지난주_실내온도_높은_공간_평균}}℃)이 {{지난주_실내온도_낮은_공간}}({{지난주_실내온도_낮은_공간_평균}}℃)보다 {{지난주_실내온도_차이}}℃ 더 더웠습니다."
            ],
            "Mapping": {
                "temporal": {
                    "지난주": "[DATE_TRUNC('week', DATE 'CURRENT_DATE') - INTERVAL '1 week', DATE_TRUNC('week', DATE 'CURRENT_DATE'))"
                },
                "spatials": {
                    "305호": "01_IB5",
                    "301호": "02_I81"
                },
                "modalities": {
                    "실내온도": "roomtemp"
                }
            },
            "Script": [
                "v_지난주_305호와301호_실내온도_df = data(t='지난주',s=['305호','301호'],m='실내온도')",
                "v_지난주_공간별_실내온도_평균 = v_지난주_305호와301호_실내온도_df.groupby('idu_name')['실내온도'].mean()",
                "v_지난주_실내온도_높은_공간 = v_지난주_공간별_실내온도_평균.idxmax()",
                "v_지난주_실내온도_낮은_공간 = v_지난주_공간별_실내온도_평균.idxmin()",
                "v_지난주_실내온도_높은_공간_평균 = v_지난주_공간별_실내온도_평균.max()",
                "v_지난주_실내온도_낮은_공간_평균 = v_지난주_공간별_실내온도_평균.min()",
                "v_지난주_실내온도_차이 = v_지난주_실내온도_높은_공간_평균 - v_지난주_실내온도_낮은_공간_평균"
            ]
        }
    },
    {
        "Input": "이번주 3층에서 가장 추웠던 방은 어디야?",
        "Tags": {
            "Style": {
                "Type": ["Implicit modality"],
                "Temporal": "이번주",
                "Spatials": ["3층"],
                "Processing": ["Avg", "ArgMin"],
                "Modality": ["실내온도"]
            },
            "Returns": [
                "Spatial"
            ]
        },
        "Response": {
            "Thinking": "사용자는 이번주 3층 전체(301호, 305호, 307호) 중 평균 실내온도가 가장 낮은 공간을 알고 싶어함. 이번주 3층의 각 공간(301호, 305호, 307호)별 실내온도를 쿼리한 후 평균이 가장 낮은 공간과 그 온도를 반환하면 됨.",
            "Expectations": [
                "이번주 3층에서 {{이번주_3층_실내온도_최저_공간}}이(가) 평균 {{이번주_3층_실내온도_최저_평균}}℃로 가장 추웠습니다."
            ],
            "Mapping": {
                "temporal": {
                    "이번주": "[DATE_TRUNC('week', DATE 'CURRENT_DATE'), DATE_TRUNC('week', DATE 'CURRENT_DATE' + INTERVAL '1 week'))"
                },
                "spatials": {
                    "301호": "02_I81",
                    "305호": "01_IB5",
                    "307호": "01_IB7"
                },
                "modalities": {
                    "실내온도": "roomtemp"
                }
            },
            "Script": [
                "v_이번주_3층_실내온도_df = data(t='이번주',s=['301호', '305호', '307호'],m='실내온도')",
                "v_이번주_3층_공간별_평균 = v_이번주_3층_실내온도_df.groupby('idu_name')['실내온도'].mean()",
                "v_이번주_3층_실내온도_최저_공간 = v_이번주_3층_공간별_평균.idxmin()",
                "v_이번주_3층_실내온도_최저_평균 = v_이번주_3층_공간별_평균.min()"
            ]
        }
    },{
        "Input": "어제 3층 평균 온도 알려줘",
        "Tags": {
            "Style": {
                "Type": ["Implicit operations"],
                "Temporal": "어제",
                "Spatials": ["3층"],
                "Processing": ["Avg"],
                "Modality": ["실내온도"]
            },
            "Returns": [
                "Temp"
            ]
        },
        "Response": {
            "Thinking": "어제 3층의 실내온도를 쿼리한 후 평균 실내온도를 계산하여 반환하면 됨.",
            "Expectations": [
                "어제 3층의 평균 실내온도는 {{어제_3층_실내온도_평균}}℃입니다."
            ],
            "Mapping": {
                "temporal": {
                    "어제": "[DATE_TRUNC('day', DATE 'CURRENT_DATE' - INTERVAL '1 day'), DATE_TRUNC('day', DATE 'CURRENT_DATE'))"
                },
                "spatials": {
                    "3층": ["01_IB5", "01_IB7", "02_I81"]
                },
                "modalities": {
                    "실내온도": "roomtemp"
                }
            },
            "Script": [
                "v_어제_3층_실내온도_df = data(t='어제',s='3층',m='실내온도')",
                "v_어제_3층_실내온도_평균 = v_어제_3층_실내온도_df['실내온도'].mean()"
            ]
        }
    },
    {
        "Input": "오늘 3층 309호 설정온도 알려줘",
        "Tags": {
            "Style": {
                "Type": [""],
                "Temporal": "오늘",
                "Spatials": ["309호"],
                "Processing": ["Avg"],
                "Modality": ["설정온도"]
            },
            "Returns": [
                "Temp"
            ]
        },
        "Response": {
            "Thinking": "사용자는 오늘 3층 309호의 설정온도를 알고 싶어함. 하지만 309호는 존재하지 않는 공간임.",
            "Expectations": [
                "죄송하지만 309호는 존재하지 않는 공간입니다."
            ],
            "Mapping": {
                "temporal": {
                    "오늘": "[DATE_TRUNC('day', DATE 'CURRENT_DATE'), DATE_TRUNC('day', DATE 'CURRENT_DATE' + INTERVAL '1 day'))"
                },
                "spatials": {
                    "309호": "Unknown"
                },
                "modalities": {
                    "설정온도": "settemp"
                }
            }
        }
    },
    {
        "Input": "지난주 3층 301호 CO2 농도 알려줘",
        "Tags": {
            "Style": {
                "Type": [""],
                "Temporal": "지난주",
                "Spatials": ["301호"],
                "Processing": ["Avg"],
                "Modality": ["CO2 농도"]
            },
            "Returns": [
                "AirQuality"
            ]
        },
        "Response": {
            "Thinking": "사용자는 지난주 301호의 CO2 농도를 알고 싶어함. 하지만 CO2 농도는 제공되지 않는 모달리티임.",
            "Expectations": [
                "죄송하지만 CO2 농도 데이터는 제공되지 않습니다."
            ],
            "Mapping": {
                "temporal": {
                    "지난주": "[DATE_TRUNC('week', DATE 'CURRENT_DATE') - INTERVAL '1 week', DATE_TRUNC('week', DATE 'CURRENT_DATE'))"
                },
                "spatials": {
                    "301호": "02_I81"
                },
                "modalities": {
                    "CO2 농도": "Unknown"
                }
            }
        }
    },
    {
        "Input": "이번주 3층 301호와 305호의 평균 설정온도 차이는?",
        "Tags": {
            "Style": {
                "Type": [""],
                "Temporal": "이번주",
                "Spatials": ["301호", "305호"],
                "Processing": ["Avg", "Diff"],
                "Modality": ["설정온도"]
            },
            "Returns": [
                "Temp"
            ]
        },
        "Response": {
            "Thinking": "사용자는 이번주 301호와 305호의 평균 설정온도 차이를 알고 싶어함. 이번주 두 공간의 설정온도를 쿼리한 후 각각의 평균을 계산하여 차이를 반환하면 됨.",
            "Expectations": [
                "이번주 301호({{이번주_301호_설정온도_평균}}℃)과 305호({{이번주_305호_설정온도_평균}}℃)의 평균 설정온도 차이는 {{이번주_301호와305호_설정온도_차이}}℃입니다."
            ],
            "Mapping": {
                "temporal": {
                    "이번주": "[DATE_TRUNC('week', DATE 'CURRENT_DATE'), DATE_TRUNC('week', DATE 'CURRENT_DATE' + INTERVAL '1 week'))"
                },
                "spatials": {
                    "301호": "02_I81",
                    "305호": "01_IB5"
                },
                "modalities": {
                    "설정온도": "settemp"
                }
            },
            "Script": [
                "v_이번주_301호와305호_설정온도_df = data(t='이번주',s=['301호','305호'],m='설정온도')",
                "v_이번주_공간별_설정온도_평균 = v_이번주_301호와305호_설정온도_df.groupby('idu_name')['설정온도'].mean()",
                "v_이번주_301호_설정온도_평균 = v_이번주_공간별_설정온도_평균['301호']",
                "v_이번주_305호_설정온도_평균 = v_이번주_공간별_설정온도_평균['305호']",
                "v_이번주_301호와305호_설정온도_차이 = abs(v_이번주_301호_설정온도_평균 - v_이번주_305호_설정온도_평균)"
            ]
        }
    },
    {
        "Input": "어제 오후 3층 307호 최고 온도는?",
        "Tags": {
            "Style": {
                "Type": ["Implicit modality"],
                "Temporal": "어제오후",
                "Spatials": ["307호"],
                "Processing": ["Max"],
                "Modality": ["실내온도"]
            },
            "Returns": [
                "Temp"
            ]
        },
        "Response": {
            "Thinking": "사용자는 어제 오후(12시~18시) 307호의 최고 실내온도를 알고 싶어함. 어제 오후 307호의 실내온도를 쿼리한 후 최고값을 계산하여 반환하면 됨.",
            "Expectations": [
                "어제 오후 307호의 최고 실내온도는 {{어제오후_307호_실내온도_최고}}℃였습니다."
            ],
            "Mapping": {
                "temporal": {
                    "어제오후": "[DATE_TRUNC('day', DATE 'CURRENT_DATE' - INTERVAL '1 day') + INTERVAL '12 hours', DATE_TRUNC('day', DATE 'CURRENT_DATE' - INTERVAL '1 day') + INTERVAL '18 hours')"
                },
                "spatials": {
                    "307호": "01_IB7"
                },
                "modalities": {
                    "실내온도": "roomtemp"
                }
            },
            "Script": [
                "v_어제오후_307호_실내온도_df = data(t='어제오후',s='307호',m='실내온도')",
                "v_어제오후_307호_실내온도_최고 = v_어제오후_307호_실내온도_df['실내온도'].max()"
            ]
        }
    },
    {
        "Input": "이번달 3층에서 밤 시간대에 가장 따뜻했던 방은?",
        "Tags": {
            "Style": {
                "Type": ["Implicit modality"],
                "Temporal": "이번달밤시간",
                "Spatials": ["3층"],
                "Processing": ["Avg", "ArgMax"],
                "Modality": ["실내온도"]
            },
            "Returns": [
                "Spatial"
            ]
        },
        "Response": {
            "Thinking": "사용자는 이번달 밤 시간대(22시~6시) 3층 전체 공간(301호, 305호, 307호) 중 평균 실내온도가 가장 높은 곳을 알고 싶어함. 이번달 밤 시간대 3층 각 공간의 실내온도를 쿼리한 후 평균을 계산하여 가장 높은 공간과 그 온도를 반환하면 됨.",
            "Expectations": [
                "이번달 밤 시간대(22시~6시) 3층에서 {{이번달밤_3층_실내온도_최고_공간}}이(가) 평균 {{이번달밤_3층_실내온도_최고_평균}}℃로 가장 따뜻했습니다."
            ],
            "Mapping": {
                "temporal": {
                    "이번달밤시간": "CUSTOM_NIGHT_HOURS"
                },
                "spatials": {
                    "301호": "02_I81",
                    "305호": "01_IB5",
                    "307호": "01_IB7"
                },
                "modalities": {
                    "실내온도": "roomtemp"
                }
            },
            "Script": [
                "v_이번달_3층_실내온도_df = data(t='이번달',s=['301호','305호','307호'],m='실내온도')",
                "v_이번달_3층_실내온도_df['시간'] = v_이번달_3층_실내온도_df['timestamp'].dt.hour",
                "v_이번달밤_3층_실내온도_df = v_이번달_3층_실내온도_df[(v_이번달_3층_실내온도_df['시간'] >= 22) | (v_이번달_3층_실내온도_df['시간'] < 6)]",
                "v_이번달밤_3층_공간별_평균 = v_이번달밤_3층_실내온도_df.groupby('idu_name')['실내온도'].mean()",
                "v_이번달밤_3층_실내온도_최고_공간 = v_이번달밤_3층_공간별_평균.idxmax()",
                "v_이번달밤_3층_실내온도_최고_평균 = v_이번달밤_3층_공간별_평균.max()"
            ]
        }
    },
    {
        "Input": "지난주 주중과 주말 3층 평균 온도 비교해줘",
        "Tags": {
            "Style": {
                "Type": ["Implicit modality"],
                "Temporal": "지난주",
                "Spatials": ["3층"],
                "Processing": ["Avg", "Diff"],
                "Modality": ["실내온도"]
            },
            "Returns": [
                "Temp"
            ]
        },
        "Response": {
            "Thinking": "사용자는 지난주 주중(월~금)과 주말(토~일) 3층의 평균 실내온도를 비교하고 싶어함. 지난주 3층의 실내온도를 쿼리한 후 요일별로 분류하여 주중과 주말의 평균을 계산하여 비교하면 됨.",
            "Expectations": [
                "지난주 3층의 주중 평균 실내온도는 {{지난주_3층_주중_실내온도_평균}}℃, 주말 평균 실내온도는 {{지난주_3층_주말_실내온도_평균}}℃로 {{지난주_3층_주중주말_온도차이}}℃ 차이가 있습니다."
            ],
            "Mapping": {
                "temporal": {
                    "지난주": "[DATE_TRUNC('week', DATE 'CURRENT_DATE') - INTERVAL '1 week', DATE_TRUNC('week', DATE 'CURRENT_DATE'))"
                },
                "spatials": {
                    "3층": ["01_IB5", "01_IB7", "02_I81"]
                },
                "modalities": {
                    "실내온도": "roomtemp"
                }
            },
            "Script": [
                "v_지난주_3층_실내온도_df = data(t='지난주',s='3층',m='실내온도')",
                "v_지난주_3층_실내온도_df['요일'] = v_지난주_3층_실내온도_df['timestamp'].dt.dayofweek",
                "v_지난주_3층_주중_df = v_지난주_3층_실내온도_df[v_지난주_3층_실내온도_df['요일'] < 5]",
                "v_지난주_3층_주말_df = v_지난주_3층_실내온도_df[v_지난주_3층_실내온도_df['요일'] >= 5]",
                "v_지난주_3층_주중_실내온도_평균 = v_지난주_3층_주중_df['실내온도'].mean()",
                "v_지난주_3층_주말_실내온도_평균 = v_지난주_3층_주말_df['실내온도'].mean()",
                "v_지난주_3층_주중주말_온도차이 = abs(v_지난주_3층_주중_실내온도_평균 - v_지난주_3층_주말_실내온도_평균)"
            ]
        }
    },
    {
        "Input": "최근 2주간 3층 305호의 온도가 27도를 넘은 횟수는?",
        "Tags": {
            "Style": {
                "Type": ["Implicit modality"],
                "Temporal": "최근2주",
                "Spatials": ["305호"],
                "Processing": ["Count", "Filter"],
                "Modality": ["실내온도"]
            },
            "Returns": [
                "Count"
            ]
        },
        "Response": {
            "Thinking": "사용자는 최근 2주간 305호의 실내온도가 27℃를 넘은 횟수를 알고 싶어함. 최근 2주간 305호의 실내온도를 쿼리한 후 27℃를 초과하는 데이터를 필터링하여 개수를 세면 됨.",
            "Expectations": [
                "최근 2주간 305호의 실내온도가 27℃를 넘은 횟수는 {{최근2주_305호_27도초과_횟수}}회입니다."
            ],
            "Mapping": {
                "temporal": {
                    "최근2주": "[DATE_TRUNC('day', DATE 'CURRENT_DATE' - INTERVAL '14 day'), DATE_TRUNC('day', DATE 'CURRENT_DATE'))"
                },
                "spatials": {
                    "305호": "01_IB5"
                },
                "modalities": {
                    "실내온도": "roomtemp"
                }
            },
            "Script": [
                "v_최근2주_305호_실내온도_df = data(t='최근2주',s='305호',m='실내온도')",
                "v_최근2주_305호_27도초과_df = v_최근2주_305호_실내온도_df[v_최근2주_305호_실내온도_df['실내온도'] > 27]",
                "v_최근2주_305호_27도초과_횟수 = len(v_최근2주_305호_27도초과_df)"
            ]
        }
    }
]