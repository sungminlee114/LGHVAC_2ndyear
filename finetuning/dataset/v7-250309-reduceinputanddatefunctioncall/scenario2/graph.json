[
    {
        "Input": "어제 4층 운영현황 보여줘",
        "Tags": {
            "Style": [
                "Graph","Op Status"
            ],
            "Returns": [
                "Graph","Op Status"
            ]
        },
        "Response": {
            "Thinking": "",
            "Expectations": [""],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "table_name": "data_t",
                        "columns": [
                            "timestamp",
                            "roomtemp",
                            "settemp",
                            "oper"
                        ],
                        "temporal": "[DATE_TRUNC('day', DATE 'CURRENT_DATE' - INTERVAL '1 day'), DATE_TRUNC('day', DATE 'CURRENT_DATE'))",
                        "spatials": [
                            "02_I84",
                            "02_I85",
                            "01_IB7"
                        ]
                    },
                    "result_name": "qr"
                },
                {
                    "type": "o",
                    "script": "raw_02_I84 = qr[qr['idu'] == '02_I84']; raw_02_I85 = qr[qr['idu'] == '02_I85']; raw_01_IB7 = qr[qr['idu'] == '01_IB7']; raw_timeseries = pd.merge(raw_02_I84, raw_02_I85, on='timestamp', suffixes=('_02_I84', '_02_I85')); raw_timeseries = pd.merge(raw_timeseries, raw_01_IB7, on='timestamp', suffixes=('', '_01_IB7')); raw_timeseries.rename(columns={'roomtemp': 'roomtemp_01_IB7', 'settemp': 'settemp_01_IB7', 'oper': 'oper_01_IB7'}, inplace=True)",
                    "returns": [
                        "raw_timeseries"
                    ]
                },
                {
                    "type": "g",
                    "args": {
                        "axes": [
                            {
                                "type": "line",
                                "description": {
                                    "xlabel": "시간",
                                    "ylabel": "온도 (°C)",
                                    "title": "어제 4층 IDU별 실내온도 및 설정온도 추이"
                                },
                                "items": [
                                    {
                                        "x": "raw_timeseries['timestamp']",
                                        "y": "raw_timeseries['roomtemp_02_I84']",
                                        "label": "02_I84 실내온도"
                                    },
                                    {
                                        "x": "raw_timeseries['timestamp']",
                                        "y": "raw_timeseries['settemp_02_I84']",
                                        "label": "02_I84 설정온도"
                                    },
                                    {
                                        "x": "raw_timeseries['timestamp']",
                                        "y": "raw_timeseries['roomtemp_02_I85']",
                                        "label": "02_I85 실내온도"
                                    },
                                    {
                                        "x": "raw_timeseries['timestamp']",
                                        "y": "raw_timeseries['settemp_02_I85']",
                                        "label": "02_I85 설정온도"
                                    },
                                    {
                                        "x": "raw_timeseries['timestamp']",
                                        "y": "raw_timeseries['roomtemp_01_IB7']",
                                        "label": "01_IB7 실내온도"
                                    },
                                    {
                                        "x": "raw_timeseries['timestamp']",
                                        "y": "raw_timeseries['settemp_01_IB7']",
                                        "label": "01_IB7 설정온도"
                                    }
                                ]
                            },
                    {
                       "type": "bar",
                       "description": {
                      "xlabel": "IDU",
                      "ylabel": "전원 켜진 시간 (분)",
                      "title": "어제 4층 IDU별 전원 켜진 시간"
                       },
                       "items": [
                      {
                          "x": "['02_I84', '02_I85', '01_IB7']",
                           "y": "[raw_timeseries['oper_02_I84'].sum() / 60, raw_timeseries['oper_02_I85'].sum() / 60, raw_timeseries['oper_01_IB7'].sum() / 60]",
                          "label": "전원 켜진 시간"
                      }
                       ]
                   },
                    {
                       "type": "box",
                      "description": {
                          "xlabel": "IDU",
                          "ylabel": "온도 (°C)",
                          "title": "어제 4층 IDU별 실내온도 및 설정온도 분포"
                      },
                      "items": [
                        {
                            "x": "raw_timeseries['timestamp']",
                            "y": "raw_timeseries['roomtemp_02_I84']",
                            "label": "02_I84 실내온도"
                        },
                        {
                            "x": "raw_timeseries['timestamp']",
                            "y": "raw_timeseries['settemp_02_I84']",
                            "label": "02_I84 설정온도"
                        },
                        {
                            "x": "raw_timeseries['timestamp']",
                            "y": "raw_timeseries['roomtemp_02_I85']",
                            "label": "02_I85 실내온도"
                        },
                        {
                            "x": "raw_timeseries['timestamp']",
                            "y": "raw_timeseries['settemp_02_I85']",
                            "label": "02_I85 설정온도"
                        },
                        {
                            "x": "raw_timeseries['timestamp']",
                            "y": "raw_timeseries['roomtemp_01_IB7']",
                            "label": "01_IB7 실내온도"
                        },
                        {
                            "x": "raw_timeseries['timestamp']",
                            "y": "raw_timeseries['settemp_01_IB7']",
                            "label": "01_IB7 설정온도"
                        }
                    ]
                
                    }
                        ]
                    }
                }
                
            ]
        }
    },
    
    {
        "Input": "이번주 4층 운영현황 보여줘",
        "Tags": {
            "Style": [
                "Graph","Op Status"
            ],
            "Returns": [
                "Graph","Op Status"
            ]
        },
        "Response": {
            "Thinking": "",
            "Expectations": [""],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "table_name": "data_t",
                        "columns": [
                            "timestamp",
                            "roomtemp",
                            "settemp",
                            "oper"
                        ],
                        "temporal": "[DATE_TRUNC('week', DATE 'CURRENT_DATE'), DATE_TRUNC('week', DATE 'CURRENT_DATE' + INTERVAL '1 week'))",
                        "spatials": [
                            "02_I84",
                            "02_I85",
                            "01_IB7"
                        ]
                    },
                    "result_name": "qr"
                },
                {
                    "type": "o",
                    "script": "raw_02_I84 = qr[qr['idu'] == '02_I84']; raw_02_I85 = qr[qr['idu'] == '02_I85']; raw_01_IB7 = qr[qr['idu'] == '01_IB7']; raw_timeseries = pd.merge(raw_02_I84, raw_02_I85, on='timestamp', suffixes=('_02_I84', '_02_I85')); raw_timeseries = pd.merge(raw_timeseries, raw_01_IB7, on='timestamp', suffixes=('', '_01_IB7')); raw_timeseries.rename(columns={'roomtemp': 'roomtemp_01_IB7', 'settemp': 'settemp_01_IB7', 'oper': 'oper_01_IB7'}, inplace=True)",
                    "returns": [
                        "raw_timeseries"
                    ]
                },
                {
                    "type": "g",
                    "args": {
                        "axes": [
                            {
                                "type": "line",
                                "description": {
                                    "xlabel": "시간",
                                    "ylabel": "온도 (°C)",
                                    "title": "이번주 4층 IDU별 실내온도 및 설정온도 추이"
                                },
                                "items": [
                                    {
                                        "x": "raw_timeseries['timestamp']",
                                        "y": "raw_timeseries['roomtemp_02_I84']",
                                        "label": "02_I84 실내온도"
                                    },
                                    {
                                        "x": "raw_timeseries['timestamp']",
                                        "y": "raw_timeseries['settemp_02_I84']",
                                        "label": "02_I84 설정온도"
                                    },
                                    {
                                        "x": "raw_timeseries['timestamp']",
                                        "y": "raw_timeseries['roomtemp_02_I85']",
                                        "label": "02_I85 실내온도"
                                    },
                                    {
                                        "x": "raw_timeseries['timestamp']",
                                        "y": "raw_timeseries['settemp_02_I85']",
                                        "label": "02_I85 설정온도"
                                    },
                                    {
                                        "x": "raw_timeseries['timestamp']",
                                        "y": "raw_timeseries['roomtemp_01_IB7']",
                                        "label": "01_IB7 실내온도"
                                    },
                                    {
                                        "x": "raw_timeseries['timestamp']",
                                        "y": "raw_timeseries['settemp_01_IB7']",
                                        "label": "01_IB7 설정온도"
                                    }
                                ]
                            },
                    {
                       "type": "bar",
                       "description": {
                      "xlabel": "IDU",
                      "ylabel": "전원 켜진 시간 (분)",
                      "title": "이번주 4층 IDU별 전원 켜진 시간"
                       },
                       "items": [
                      {
                          "x": "['02_I84', '02_I85', '01_IB7']",
                           "y": "[raw_timeseries['oper_02_I84'].sum() / 60, raw_timeseries['oper_02_I85'].sum() / 60, raw_timeseries['oper_01_IB7'].sum() / 60]",
                          "label": "전원 켜진 시간"
                      }
                       ]
                   },
                    {
                       "type": "box",
                      "description": {
                          "xlabel": "IDU",
                          "ylabel": "온도 (°C)",
                          "title": "이번주 4층 IDU별 실내온도 및 설정온도 분포"
                      },
                      "items": [
                        {
                            "x": "raw_timeseries['timestamp']",
                            "y": "raw_timeseries['roomtemp_02_I84']",
                            "label": "02_I84 실내온도"
                        },
                        {
                            "x": "raw_timeseries['timestamp']",
                            "y": "raw_timeseries['settemp_02_I84']",
                            "label": "02_I84 설정온도"
                        },
                        {
                            "x": "raw_timeseries['timestamp']",
                            "y": "raw_timeseries['roomtemp_02_I85']",
                            "label": "02_I85 실내온도"
                        },
                        {
                            "x": "raw_timeseries['timestamp']",
                            "y": "raw_timeseries['settemp_02_I85']",
                            "label": "02_I85 설정온도"
                        },
                        {
                            "x": "raw_timeseries['timestamp']",
                            "y": "raw_timeseries['roomtemp_01_IB7']",
                            "label": "01_IB7 실내온도"
                        },
                        {
                            "x": "raw_timeseries['timestamp']",
                            "y": "raw_timeseries['settemp_01_IB7']",
                            "label": "01_IB7 설정온도"
                        }
                    ]
                
                    }
                        ]
                    }
                }
                
            ]
        }
    }
   
    ]