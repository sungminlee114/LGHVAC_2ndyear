[
    {
        "Input": "오늘 4층의 평균 실내온도 알려줘",
        "Tags": {
            "Style": [
                "Avg/Diff/Get",
                "UserDefinedGroup"
            ],
            "Returns": [
                "Temp"
            ]
        },
        "Response": {
            "Thinking": "사용자는 오늘 4층에 있는 모든 방의 실내온도의 평균값을 알고 싶어합니다. 4층에 해당하는 idu들(02_I84, 02_I85, 01_IB7)의 오늘 실내온도 데이터를 쿼리한 후 평균값을 계산하여 반환하면 됩니다.",
            "Expectations": [
                "오늘 4층의 평균 실내온도는 {{roomtemp_avg}}℃ 입니다."
            ],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "table_name": "data_t",
                        "columns": [
                            "roomtemp"
                        ],
                        "temporal": "[DATE_TRUNC('day', DATE 'CURRENT_DATE'), DATE_TRUNC('day', DATE 'CURRENT_DATE' + INTERVAL '1 day'))",
                        "spatials": [
                            "02_I84",
                            "02_I85",
                            "01_IB7"
                        ]
                    },
                    "result_name": "qr"
                },
                {
                    "type": "o",
                    "script": "roomtemp_avg = qr['roomtemp'].mean();",
                    "returns": [
                        "roomtemp_avg"
                    ]
                }
            ]
        }
    },
    {
        "Input": "4층에서 에어컨 꺼진 방들 알려줘",
        "Tags": {
            "Style": [
                "Implicit temporal",
                "Avg/Diff/Get",
                "UserDefinedGroup"
            ],
            "Returns": [
                "Spatial"
            ]
        },
        "Response": {
            "Thinking": "사용자는 현재 4층에 있는 방들 중 에어컨이 꺼진 방들을 알고 싶어합니다. 최근 5분간 4층의 모든 idu(02_I84, 02_I85, 01_IB7)의 전원(oper) 상태를 쿼리한 후 가장 최근 oper가 False인 방들을 반환하면 됩니다.",
            "Expectations": [
                "현재 4층에서 에어컨이 꺼진 방은 {{off_names}}입니다."
            ],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "table_name": "data_t",
                        "columns": [
                            "oper"
                        ],
                        "temporal": "[TIMESTAMP 'CURRENT_TIMESTAMP' - INTERVAL '5 minutes', TIMESTAMP 'CURRENT_TIMESTAMP']",
                        "spatials": [
                            "02_I84",
                            "02_I85",
                            "01_IB7"
                        ]
                    },
                    "result_name": "qr"
                },
                {
                    "type": "o",
                    "script": "qr_recent = qr[qr['timestamp'] == qr['timestamp'].max()];off_names = pd.unique(qr_recent[qr_recent['oper'] == False]['idu']);",
                    "returns": [
                        "off_names"
                    ]
                }
            ]
        }
    },
    {
        "Input": "4층에서 가장 추운 방은 어디야?",
        "Tags": {
            "Style": [
                "Implicit temporal",
                "Implicit modality",
                "UserDefinedGroup",
                "ArgMinMax/Compare"
            ],
            "Returns": [
                "Temp",
                "Spatial"
            ]
        },
        "Response": {
            "Thinking": "사용자는 현재 4층에 있는 방들 중 실내온도가 가장 낮은 방을 알고 싶어합니다. 최근 5분간 4층의 모든 idu(02_I84, 02_I85, 01_IB7)의 실내온도 데이터를 쿼리한 후 최저 온도를 기록한 방과 해당 온도를 반환하면 됩니다.",
            "Expectations": [
                "현재 4층 중 {{coldest_rooms}}이(가) {{coldest_temp}}℃로 가장 추워요."
            ],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "table_name": "data_t",
                        "columns": [
                            "roomtemp"
                        ],
                        "temporal": "[TIMESTAMP 'CURRENT_TIMESTAMP' - INTERVAL '5 minutes', TIMESTAMP 'CURRENT_TIMESTAMP']",
                        "spatials": [
                            "02_I84",
                            "02_I85",
                            "01_IB7"
                        ]
                    },
                    "result_name": "qr"
                },
                {
                    "type": "o",
                    "script": "qr_recent = qr[qr['timestamp'] == qr['timestamp'].max()];coldest_temp = qr_recent['roomtemp'].min();coldest_rooms = pd.unique(qr_recent[qr_recent['roomtemp'] == coldest_temp]['idu']);",
                    "returns": [
                        "coldest_rooms",
                        "coldest_temp"
                    ]
                }
            ]
        }
    },
    {
        "Input": "4층의 지난달 설정온도 최대값과 최소값 알려줘",
        "Tags": {
            "Style": [
                "MinMax",
                "UserDefinedGroup"
            ],
            "Returns": [
                "Temp"
            ]
        },
        "Response": {
            "Thinking": "사용자는 지난달 4층에 속한 방들의 설정온도 데이터에서 최대값과 최소값을 알고 싶어합니다. 지난달 4층의 설정온도 데이터를 쿼리한 후 최대값과 최소값을 계산하여 반환하면 됩니다.",
            "Expectations": [
                "지난달 4층의 설정온도는 최대 {{settemp_max}}℃, 최소 {{settemp_min}}℃였습니다."
            ],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "table_name": "data_t",
                        "columns": [
                            "settemp"
                        ],
                        "temporal": "[DATE 'CURRENT_DATE' - INTERVAL '1 month', DATE 'CURRENT_DATE']",
                        "spatials": [
                            "02_I84",
                            "02_I85",
                            "01_IB7"
                        ]
                    },
                    "result_name": "qr"
                },
                {
                    "type": "o",
                    "script": "settemp_max = qr['settemp'].max();settemp_min = qr['settemp'].min();",
                    "returns": [
                        "settemp_max",
                        "settemp_min"
                    ]
                }
            ]
        }
    }, {
        "Input": "몇시고?",
        "Tags": {
            "Style": ["Metadata"],
            "Returns": ["Time"]
        },
        "Response": {
            "Thinking": "사용자는 현재 시간을 물어봄. 현재 시간을 Metadata에서 읽어서 반환하면 됨.",
            "Expectations": [
                "{{current_time}} 입니다."
            ],
            "Instructions": [
                {
                    "type": "o",
                    "script": "current_time = pd.Timestamp(Metadata['current_datetime']).strftime('%H:%M:%S');",
                    "returns": [
                        "current_time"
                    ]
                }
            ]
        }
    },
    {
        "Input": "오늘 4층에서 가장 더운 방은 어디야?",
        "Tags": {
            "Style": [
                "Implicit modality",
                "UserDefinedGroup",
                "ArgMinMax/Compare"
            ],
            "Returns": [
                "Temp",
                "Spatial"
            ]
        },
        "Response": {
            "Thinking": "사용자는 4층에 있는 방들 중 오늘 실내온도가 가장 높은 방과 해당 온도를 알고 싶어합니다. 오늘 4층의 실내온도 데이터를 쿼리한 후 실내온도 최댓값과 그 값을 기록한 방을 찾아 반환하면 됩니다.",
            "Expectations": [
                "오늘 4층에서 {{hottest_rooms}}이(가) {{hottest_temp}}℃로 가장 더워요."
            ],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "table_name": "data_t",
                        "columns": [
                            "roomtemp"
                        ],
                        "temporal": "[DATE_TRUNC('day', DATE 'CURRENT_DATE'), DATE_TRUNC('day', DATE 'CURRENT_DATE' + INTERVAL '1 day'))",
                        "spatials": [
                            "02_I84",
                            "02_I85",
                            "01_IB7"
                        ]
                    },
                    "result_name": "qr"
                },
                {
                    "type": "o",
                    "script": "hottest_temp = qr['roomtemp'].max();hottest_rooms = pd.unique(qr[qr['roomtemp'] == hottest_temp]['idu']);",
                    "returns": [
                        "hottest_rooms",
                        "hottest_temp"
                    ]
                }
            ]
        }
    },  {
        "Input": "오늘 앞반 설정온도 평균 알려줘",
        "Tags": {
            "Style": [
                "Unknown",
                "Avg/Diff/Get"
            ],
            "Returns": []
        },
        "Response": {
            "Thinking": "앞반에 해당하는 공간 정보가 Metadata에 포함되어 있지 않습니다. 답변하기 전에 사용자에게 앞반이 어떤 곳인지 물어보고, 해당 정보를 변수에 저장해야 합니다.",
            "Expectations": [
                "앞반이 어디인지 알려주세요."
            ],
            "Instructions": []
        }
    }
]
