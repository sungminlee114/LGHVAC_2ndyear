[
    
    {
        "Input": "오늘 4층의 평균 설정온도 알려줘",
        "Tags": {
            "Style": [
                "Avg/Diff/Get",
                "UserDefinedGroup"
            ],
            "Returns": [
                "Temp"
            ]
        },
        "Response": {
            "Thinking": "사용자는 오늘 4층에 속한 모든 방에서 측정된 설정온도의 평균값을 알고 싶어합니다. 4층에 해당하는 idu들(02_I84, 02_I85, 01_IB7)의 오늘 설정온도 데이터를 쿼리한 후 평균값을 계산하여 반환하면 됩니다.",
            "Expectations": [
                "오늘 4층의 평균 설정온도는 {{settemp_avg}}℃ 입니다."
            ],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "table_name": "data_t",
                        "columns": [
                            "settemp"
                        ],
                        "temporal": "[DATE_TRUNC('day', DATE 'CURRENT_DATE'), DATE_TRUNC('day', DATE 'CURRENT_DATE' + INTERVAL '1 day'))",
                        "spatials": [
                            "02_I84",
                            "02_I85",
                            "01_IB7"
                        ]
                    },
                    "result_name": "qr"
                },
                {
                    "type": "o",
                    "script": "settemp_avg = qr['settemp'].mean();",
                    "returns": [
                        "settemp_avg"
                    ]
                }
            ]
        }
    }, {
        "Input": "지금 시간이?",
        "Tags": {
            "Style": ["Metadata"],
            "Returns": ["Time"]
        },
        "Response": {
            "Thinking": "사용자는 현재 시간을 물어봄. 현재 시간을 Metadata에서 읽어서 반환하면 됨.",
            "Expectations": [
                "지금은 {{current_time}} 입니다."
            ],
            "Instructions": [
                {
                    "type": "o",
                    "script": "current_time = pd.Timestamp(Metadata['current_datetime']).strftime('%H:%M:%S');",
                    "returns": [
                        "current_time"
                    ]
                }
            ]
        }
    }, {
        "Input": "에어컨 전원이 켜진 4층 방들 알려줘",
        "Tags": {
            "Style": [
                "Avg/Diff/Get",
                "UserDefinedGroup"
            ],
            "Returns": [
                "Spatial"
            ]
        },
        "Response": {
            "Thinking": "사용자는 현재 4층에 있는 모든 idu들 중에서 에어컨 전원(oper)이 켜져 있는 방들을 알고 싶어합니다. 최근 5분간의 데이터를 쿼리한 후 oper가 True인 방들을 반환하면 됩니다.",
            "Expectations": [
                "현재 4층에서 에어컨 전원이 켜진 방은 {{on_names}}입니다."
            ],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "table_name": "data_t",
                        "columns": [
                            "oper"
                        ],
                        "temporal": "[TIMESTAMP 'CURRENT_TIMESTAMP' - INTERVAL '5 minutes', TIMESTAMP 'CURRENT_TIMESTAMP']",
                        "spatials": [
                            "02_I84",
                            "02_I85",
                            "01_IB7"
                        ]
                    },
                    "result_name": "qr"
                },
                {
                    "type": "o",
                    "script": "qr_recent = qr[qr['timestamp'] == qr['timestamp'].max()];on_names = qr_recent[qr_recent['oper'] == True]['idu'].values;",
                    "returns": [
                        "on_names"
                    ]
                }
            ]
        }
    }, 
    {
        "Input": "오늘 우리반의 가장 최근 설정온도 알려줘",
        "Tags": {
            "Style": [
                "Avg/Diff/Get"
            ],
            "Returns": [
                "Temp",
                "Time"
            ]
        },
        "Response": {
            "Thinking": "사용자는 오늘 우리반(02_I84)의 가장 최근 설정온도를 알고 싶어합니다. 최근 5분간 우리반의 설정온도 데이터를 쿼리한 후 가장 최신의 데이터를 반환하면 됩니다.",
            "Expectations": [
                "우리반의 가장 최근 설정온도는 {{settemp_recent_time}}에 설정된 {{settemp_recent}}℃입니다."
            ],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "table_name": "data_t",
                        "columns": [
                            "settemp"
                        ],
                        "temporal": "[TIMESTAMP 'CURRENT_TIMESTAMP' - INTERVAL '5 minutes', TIMESTAMP 'CURRENT_TIMESTAMP']",
                        "spatials": [
                            "02_I84"
                        ]
                    },
                    "result_name": "qr"
                },
                {
                    "type": "o",
                    "script": "recent_time = qr['timestamp'].max();settemp_recent = qr[qr['timestamp'] == recent_time]['settemp'].values[0];",
                    "returns": [
                        "recent_time",
                        "settemp_recent"
                    ]
                }
            ]
        }
    }, 
    {
        "Input": "저번주 수요일 옆반 실내온도 평균 알려줘",
        "Tags": {
            "Style": [
                "Unknown",
                "Avg/Diff/Get"
            ],
            "Returns": []
        },
        "Response": {
            "Thinking": "옆반에 해당하는 공간 정보가 Metadata에 포함되어 있지 않습니다. 답변하기 전에 사용자에게 옆반이 어떤 곳인지 물어보고, 해당 정보를 변수에 저장해야 합니다.",
            "Expectations": [
                "옆반이 어디인지 알려주세요."
            ],
            "Instructions": []
        }
    }
]