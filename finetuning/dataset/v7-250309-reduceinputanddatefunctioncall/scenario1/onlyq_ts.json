[
    {
        "Input": "지금 옆반 온도랑 우리반 온도 알려줘",
        "Tags": {
            "Style": [
                "Implicit modality",
                "Avg/Diff/Get"
            ],
            "Returns": [
                "Temp"
            ]
        },
        "Response": {
            "Thinking": "사용자는 현재 옆반과 우리반의 실내온도를 알고 싶어함. 현재 옆반과 우리반의 실내온도를 쿼리한 후 반환하면 됨.",
            "Expectations": [
                "지금 옆반과 우리반의 실내온도는 각각 {{현재_옆반_실내온도}}℃, {{현재_우리반_실내온도}}℃입니다."
            ],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "temporal": {
                            "현재": "LAST_RECORD"
                        },
                        "spatials": {
                            "옆반": "01_IB7",
                            "우리반": "01_IB5"
                        },
                        "modalities": {
                            "실내온도": "roomtemp"
                        }
                    }
                },
                {
                    "type": "o",
                    "script": [
                        "v_현재_옆반_실내온도_df = data(t='현재', s='옆반, m='실내온도')",
                        "v_현재_우리반_실내온도_df = data(t='현재', s='우리반, m='실내온도')",
                        "v_현재_옆반_실내온도 = v_현재_옆반_실내온도_df.values[0]",
                        "v_현재_우리반_실내온도 = v_현재_우리반_실내온도_df.values[0]"
                    ]
                }
            ]
        }
    },
    {
        "Input": "1시간 전 설정온도랑 실내온도 차이 알려줘.",
        "Tags": {
            "Style": [
                "Implicit spatial",
                "Avg/Diff/Get"
            ],
            "Returns": [
                "Temp"
            ]
        },
        "Response": {
            "Thinking": "사용자는 1시간 전 우리반의 설정온도와 실내온도의 차이를 알고싶어함. 1시간 전 우리반의 설정온도와 실내온도를 쿼리한 후 차이를 계산하여 반환하면 됨.",
            "Expectations": [
                "1시간 전 설정온도({{1시간전_우리반_설정온도}}℃)와 실내온도({{1시간전_우리반_실내온도}}℃)의 차이는 {{1시간전_우리반_온도차이}}℃입니다."
            ],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "temporal": {
                            "1시간전": "TIMESTAMP 'CURRENT_TIMESTAMP' - INTERVAL '1 hour'"
                        },
                        "spatials": {
                            "우리반": "01_IB5"
                        },
                        "modalities": {
                            "설정온도": "settemp",
                            "실내온도": "roomtemp"
                        }
                    }
                },
                {
                    "type": "o",
                    "script": [
                        "v_1시간전_우리반_설정온도_df = data(t='1시간전', s='우리반', m='설정온도')",
                        "v_1시간전_우리반_실내온도_df = data(t='1시간전', s='우리반', m='실내온도')",
                        "v_1시간전_우리반_설정온도 = v_1시간전_우리반_설정온도_df.values[0]",
                        "v_1시간전_우리반_실내온도 = v_1시간전_우리반_실내온도_df.values[0]",
                        "v_1시간전_우리반_온도차이 = v_1시간전_우리반_실내온도 - v_1시간전_우리반_설정온도"
                    ]
                }
            ]
        }
    },
    {
        "Input": "옆반의 가장 최근 온도랑 설정온도 알려줘",
        "Tags": {
            "Style": [
                "Avg/Diff/Get",
                "Implicit modality"
            ],
            "Returns": [
                "Temp",
                "Time"
            ]
        },
        "Response": {
            "Thinking": "사용자는 옆반의 가장 최근 실내온도와 설정온도를 알고 싶어함. 가장 최근 실내온도와 설정온도를 쿼리한 후 그 일시와 온도를 반환하면 됨.",
            "Expectations": [
                "옆반의 가장 최근 실내온도는 {{가장최근_옆반_실내온도_일시}}에 측정된 {{가장최근_옆반_실내온도}}℃이고, 설정온도는 {{가장최근_옆반_설정온도_일시}}에 설정된 {{가장최근_옆반_설정온도}}℃입니다."
            ],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "temporal": {
                            "가장최근": "LAST_RECORD"
                        },
                        "spatials": {
                            "옆반": "01_IB7"
                        },
                        "modalities": {
                            "실내온도": "roomtemp",
                            "설정온도": "settemp"
                        }
                    }
                },
                {
                    "type": "o",
                    "script": [
                        "v_가장최근_옆반_실내온도_df = data(t='가장최근',s='옆반',m='실내온도')",
                        "v_가장최근_옆반_설정온도_df = data(t='가장최근',s='옆반',m='설정온도')",
                        "v_가장최근_옆반_실내온도_일시, v_가장최근_옆반_실내온도 = get_recent(v_최근5분_옆반_실내온도_df, target='m')",
                        "v_가장최근_옆반_설정온도_일시, v_가장최근_옆반_설정온도 = get_recent(v_최근5분_옆반_설정온도_df, target='m')"
                    ]
                }
            ]
        }
    },
    {
        "Input": "이번주 우리반 평균 온도 알려줘",
        "Tags": {
            "Style": [
                "Implicit modality",
                "Avg/Diff/Get"
            ],
            "Returns": [
                "Temp"
            ]
        },
        "Response": {
            "Thinking": "사용자는 이번주 우리반의 평균 실내온도를 알고싶어함. 이번주 우리반의 실내온도 데이터를 쿼리한 후 평균값을 계산하여 반환하면 됨.",
            "Expectations": [
                "이번주 우리반의 평균 실내온도는 {{이번주_우리반_실내온도_평균}}℃ 입니다."
            ],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "temporal": {
                            "이번주": "[DATE_TRUNC('week', DATE 'CURRENT_DATE'), DATE_TRUNC('week', DATE 'CURRENT_DATE' + INTERVAL '1 week'))"
                        },
                        "spatials": {
                            "우리반": "01_IB5"
                        },
                        "modalities": {
                            "실내온도": "roomtemp"
                        }
                    }
                },
                {
                    "type": "o",
                    "script": [
                        "v_이번주_우리반_실내온도_df = data(t='이번주',s='우리반',m='실내온도')",
                        "v_이번주_우리반_실내온도_평균 = v_이번주_우리반_실내온도_df.mean()"
                    ]
                }
            ]
        }
    },
    {
        "Input": "지난 한달간 설정온도 평균을 알려줘.",
        "Tags": {
            "Style": [
                "Implicit spatial",
                "Avg/Diff/Get"
            ],
            "Returns": [
                "Temp"
            ]
        },
        "Response": {
            "Thinking": "사용자는 지난 한달 동안 우리반의 설정온도 평균을 알고싶어함. 해당 기간의 설정온도 데이터를 쿼리한 후 평균값을 반환하면 됨.",
            "Expectations": [
                "지난 한달간 설정온도 평균은 {{지난한달_우리반_설정온도_평균}}℃였습니다."
            ],
            "Instructions": [
                {
                    "type": "q",
                    "args": {
                        "temporal": {
                            "지난한달": "[DATE 'CURRENT_DATE' - INTERVAL '1 month', DATE 'CURRENT_DATE']"
                        },
                        "spatials": {
                            "우리반": "01_IB5"
                        },
                        "modalities": {
                            "설정온도": "settemp"
                        }
                    }
                },
                {
                    "type": "o",
                    "script": [
                        "v_지난한달_우리반_설정온도_df = data(t='지난한달',s='우리반',m='설정온도')",
                        "v_지난한달_우리반_설정온도_평균 = v_지난한달_우리반_설정온도_df.mean()"
                    ]
                }
            ]
        }
    }
]